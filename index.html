<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
  

  <!-- PACE Progress Bar START -->

  
  <title>Leah&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Leah&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Leah&#39;s Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leah&#39;s Blog">
  
    <link rel="alternate" href="/atom.xml" title="Leah&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-0123456789ABCDEF",
          enable_page_level_ads: true
      });
  </script>
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Categories"; 

  themeMenus["/tags"] = "Tags"; 

  themeMenus["/about"] = "About"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Leah&#39;s Blog" rel="home"> Leah&#39;s Blog </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-Webpack- Single-file components(Vue.)" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/14/Webpack- Single-file components(Vue.)/">Webpack- Single-file components(Vue.)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/14/Webpack- Single-file components(Vue.)/" class="article-date">
	  <time datetime="2019-06-14T07:37:29.968Z" itemprop="datePublished">June 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Webpack 4 之後的版本，將 Webpack 及 Webpack-cli 拆開了，因此在載用 webpack 時，也要安裝 webpack-cli。</p>
<p>在搭建(scaffold)一個專案時，最推薦使用框架的命令行介面(command lin interface, CLI)，提供一個入口檔案及配置文件，這個鷹架(scaffolding)會透過開發建置流程，最終將檔案打包出一個生產版本。</p>
<p>一般使用 Vue.js 僅需要用<code>&lt;script&gt;</code>標籤引入 CDN，不需要開發建置過程，專案中即可使用 Vue.js。但是，如果要使用 <strong>Vue single-page components(SFCs)</strong>，就一定要使用開發建置工具，將<code>.vue</code>檔案轉換為瀏覽器可以解讀的 HTML、CSS、JavaScript。</p>
<p>Vue-cli 提供預設好的開發建置流程，但是，如果想要自己定義，則可以使用 Webpack 來搭建(scaffold)專案。</p>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>Webpack 是一個模組打包工具，他可以將多個檔案中的程式碼合併成一個。在 Webpack 出現之前，必須要透過<code>&lt;script&gt;</code>標籤將多個 JavaScript 引入到一個檔案中。</p>
<p>此外，Webpack 也透過 loader 和 plugin 來轉換程式碼，例如將 ES6+ 轉換為 ES5，或是將 SCSS 轉為 CSS。</p>
<h2 id="用-SPC-實作一個-Vue-專案"><a href="#用-SPC-實作一個-Vue-專案" class="headerlink" title="用 SPC 實作一個 Vue 專案"></a>用 SPC 實作一個 Vue 專案</h2><h3 id="Step-1-專案結構建置"><a href="#Step-1-專案結構建置" class="headerlink" title="Step 1.專案結構建置"></a>Step 1.專案結構建置</h3><p>最基本的專案應當要有一個 HTML、一個 JavaScript、一個 Vue 檔案(<code>.vue</code>)，通常會將這些檔案放置在 src 的資料夾中，用以區分這些是我們寫的程式碼，避免跟 Webpack 打包建置後的檔案搞混。</p>
<p>我們會使用到 Webpack ，因此需要一個 Webpack 的配置檔案，通常命名為 <code>webpack.config.js</code></p>
<p>此外，我們會需要 Babel 將 ES6 編譯為 ES5，Babel 本身也是 Webpack 的附加插件，因此需要一個 Babel 的配置檔案，命名為<code>.babelrc.js</code></p>
<p>所以先依照上述說明建置如下專案結構：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src(forder)</span><br><span class="line">  |_myApp2.vue</span><br><span class="line">  |_index.html</span><br><span class="line">  |_main.js</span><br><span class="line">webpack.config.js</span><br><span class="line">.babelrc.js</span><br></pre></td></tr></table></figure>
<p>接著，我們會使用 NPM 來做依賴(dependencies)管理，需要透過指令將專案初始化，並跟著 terminal 視窗中的提示問題完成創建：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>初始化之後，會發現專案中自動多出了一個 <code>package.json</code> 檔案。所以目前應該會看起來像這樣：<br><img src="https://i.imgur.com/C7zlF6f.png" alt></p>
<h3 id="Step-2-安裝套件依賴"><a href="#Step-2-安裝套件依賴" class="headerlink" title="Step 2.安裝套件依賴"></a>Step 2.安裝套件依賴</h3><p>以下是幾個我們目前會使用到到的套件依賴：</p>
<ul>
<li>vue: JS 前端框架</li>
<li>vue-loader &amp; vue-template-compiler:將 vue 檔案轉換為 JavsSript</li>
<li>webpack:轉換並打包程式碼</li>
<li>webpack-cli:用以執行 Webpack 命令</li>
<li>webpack-dev-server:雖然在這裡示範的小專案不會用到 HTTP request，但使我們會需要開發伺服器來服務這個專案</li>
<li>babel-loader:將 ES6 語法轉換為 ES5（需要搭配下面兩個插件依賴使用）</li>
<li>@babel/core &amp; @babel/preset: Babel-loader 本身無法作用，必須搭配這兩個插件才能將 ES6 語法轉換為 ES5</li>
<li>css-loader:會將<code>.vue</code>檔案中的 CSS 或是任何引入的 CSS，載入到 JavaScript 檔案中，並且解析路徑。</li>
<li>vue-style-loader:從 css-loader 取得 CSS 之後，會再透過 vue-style-loader 引入到 HTML 中，會在 HTML 的 head 中，自動生成出一個<code>&lt;style&gt;</code> 標籤。簡單來說，css-loader 是單純將 css 作載入 js;style-loader 則是作解析的動作，讓頁面能讀懂 css，所以它們倆合體就可以達成目的了。</li>
<li>html-webpack-plugin:將 index.html 還有打包後的 js 引入到<code>&lt;head&gt;</code>，並且複製到 dist 資料夾中。</li>
<li>rimraf:讓我們可以從命令行中刪除檔案</li>
</ul>
<p>接著就在命令行中輸入指令，開始安裝依賴：分開發依賴(指令添加<code>-S</code>)、生產依賴(指令添加<code>-D</code>)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -S</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-loader vue-template-compiler webpack webpack-cli webpack-dev-server babel-loader @babel/core @babel/preset-env css-loader vue-style-loader html-webpack-plugin rimraf -D</span><br></pre></td></tr></table></figure>
<p>安裝完畢之後，可以在 package.json 中查看，另外，專案中也會自動產生一個 node_modules 的資料夾，目前專案看起來會像這樣:</p>
<p><img src="https://i.imgur.com/LIu97Tb.png" alt></p>
<h3 id="Step-3-檔案創建"><a href="#Step-3-檔案創建" class="headerlink" title="Step 3.檔案創建"></a>Step 3.檔案創建</h3><h4 id="myApp-vue"><a href="#myApp-vue" class="headerlink" title="myApp.vue"></a><code>myApp.vue</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &apos;Hello World&apos;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  font-family: &apos;Roboto&apos;, sans-serif;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a><code>index.html</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Vue Hello World&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a><code>main.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> myApp <span class="keyword">from</span> <span class="string">'./myApp.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function">(<span class="params">h</span>) =&gt;</span> h(myApp),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>解釋一下第 6 行程式碼<code>render: h =&gt; h(myApp)</code>的縮寫流程：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完整原始程式碼</span></span><br><span class="line">render: <span class="function"><span class="keyword">function</span> (<span class="params">createElement</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(myApp);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 簡化</span></span><br><span class="line">render(createElement)&#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(myApp);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 再簡化</span></span><br><span class="line">render(h)&#123;</span><br><span class="line">    <span class="keyword">return</span> h(myApp);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 最終簡化</span></span><br><span class="line">render(h) =&gt; h(myApp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// createElement函式是用來生成HTML DOM元素</span></span><br><span class="line"><span class="comment">// 也就是生成HTML結構中的 script 腳笨</span></span><br><span class="line"><span class="comment">// 所以用Hyperscript取h作為程式碼中createElement的簡寫。</span></span><br></pre></td></tr></table></figure>
<h4 id="babelrc-js"><a href="#babelrc-js" class="headerlink" title="babelrc.js"></a><code>babelrc.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [<span class="string">'@babel/preset-env'</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Step-4-配置-Webpack"><a href="#Step-4-配置-Webpack" class="headerlink" title="Step 4.配置 Webpack"></a>Step 4.配置 Webpack</h3><p>到目前為止，Webpack 需要訪問的檔案都備齊了，接著剩下最後兩件事情：告訴 Webpack 做什麼，並且執行 Webpack。</p>
<h4 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a><code>webpack.config.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.export = &#123;</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">'babel-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>, <span class="attr">use</span>: <span class="string">'vue-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'vue-style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'.src/index.html'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 1、2 行，import 下面會用到的 plugin。注意！loader 不需要 import！（不過在這個案例中，第 9 行的 vue-loader 會需要用到第 17 行的 plugin 才能運作，但是像 babel-loader 就不需要。）</li>
<li>第 4 行，將配置(configuration)以物件的型態 export，這也是執行 Webpack 命令的入口。</li>
<li>第 5 行，這是入口模組(在 Webpack 中，每個檔案都可視為一個模組)，Webpack 需要一個起始點，所以 Webpack 會從<code>main.js</code>開始查找去梳理所有的程式碼。</li>
<li>第 7 行，用<code>rules</code>陣列來告訴 Webpack 在梳理程式碼時要遵循的規則。</li>
<li>第 8 行，這條規則指示 Webpack 當遇到以<code>.js</code>結尾的檔案時，要使用<code>babel-loader</code>去轉換程式碼。</li>
<li>第 9 行，這條規則指示 Webpack 當遇到以<code>.vue</code>結尾的檔案時，要使用<code>vue-loader</code>(需要搭配地 17 行的插件)去轉緩程式碼。</li>
<li>第 10 行，這條規則是指示 Webpack:先用<code>css-loader</code>從<code>.vue</code>檔案中拿出 CSS，再用<code>vue-style-loader</code>轉以<code>&lt;style&gt;</code>tag 的形式放進 HTML 中。(有些檔案會需要兩個 loader 去執行，在 Webpack 中的處理流程有點違反直覺，通常都是從左到右，但是 Webpack 是從右到左。)</li>
<li>第 13 行，用<code>plugins</code>陣列，放入我們需要用到的 plugin</li>
<li>第 14 行，<code>HtmlWebpackPlugin</code>這個 plugin 會獲取<code>index.html</code>檔案的位置，並且將打包後的 JavaScript 檔案以<code>&lt;script&gt;</code>標籤放入其中。此外，這個 plugin 也會複製 HTML 檔案到 build 後的資料夾中。</li>
<li>第 17 行，<code>VueLoaderPlugin</code>這個 plugin 會搭配第 9 行的<code>vue-loader</code>解析<code>.vue</code>檔案。</li>
</ul>
<p>HtmlWebpackPlugin 獲取 index.html 文件的位置，並通過腳本標記將捆綁的 JavaScript 文件添加到其中。</p>
<h3 id="Step-5-執行-Webpack"><a href="#Step-5-執行-Webpack" class="headerlink" title="Step 5.執行 Webpack"></a>Step 5.執行 Webpack</h3><p>上述所有的配置都完成之後，最後只要設定好<code>package.json</code>檔，就可以執行 Webpack 了。在理想的情況下，當我們修改內容，會希望瀏覽器自動更新，因此我們需要<code>webpack-dev-server</code>。</p>
<p><code>webpack-dev-server</code>的功能簡而言之，就是當檔案有修改儲存，重新 bundle 之後，開發人員不需要按下重整按鈕，就會通知瀏覽器執行畫面重整。但是要注意，<code>webpack-dev-server</code>僅適用於開發階段，它產生出的<code>bundle.js</code>並不會出現在我們專案中的 dist 資料夾，而是暫存在記憶體中，所以如果要上正式發布環境，請參考 Step7。</p>
<h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a><code>package.json</code></h4><ul>
<li>在第 7 行<code>scripts</code>的地方刪掉原先預設的<code>test</code>，改以<code>serve</code>取代之。（命名為 serve 並非一定，可以自己隨心改變）</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"vue-single-file-components"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"webpack.config.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"serve"</span>: <span class="string">"webpack-dev-server --mode development"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="string">"^2.6.10"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@babel/core"</span>: <span class="string">"^7.4.5"</span>,</span><br><span class="line">    <span class="attr">"@babel/preset-env"</span>: <span class="string">"^7.4.5"</span>,</span><br><span class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^8.0.6"</span>,</span><br><span class="line">    <span class="attr">"css-loader"</span>: <span class="string">"^3.0.0"</span>,</span><br><span class="line">    <span class="attr">"html-webpack-plugin"</span>: <span class="string">"^3.2.0"</span>,</span><br><span class="line">    <span class="attr">"rimraf"</span>: <span class="string">"^2.6.3"</span>,</span><br><span class="line">    <span class="attr">"vue-loader"</span>: <span class="string">"^15.7.0"</span>,</span><br><span class="line">    <span class="attr">"vue-style-loader"</span>: <span class="string">"^4.1.2"</span>,</span><br><span class="line">    <span class="attr">"vue-template-compiler"</span>: <span class="string">"^2.6.10"</span>,</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.34.0"</span>,</span><br><span class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.3.4"</span>,</span><br><span class="line">    <span class="attr">"webpack-dev-server"</span>: <span class="string">"^3.7.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接著就可以在 terminal 或 command line 裡面輸入指令啟用 Webpack:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
<p>或是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-serve --mode development</span><br></pre></td></tr></table></figure>
<p>如果一切正確無誤，會看到「Compiled successfully」的字樣：<br><img src="https://i.imgur.com/TDHS3mk.png" alt></p>
<p>接著使用瀏覽器打開<code>http://localhost:8080</code>，可以看到畫面正確顯示：<br><img src="https://i.imgur.com/Tk6y4MI.png" alt></p>
<h3 id="Step-6-熱加載"><a href="#Step-6-熱加載" class="headerlink" title="Step 6.熱加載"></a>Step 6.熱加載</h3><p>有個狀況是，當我們在瀏覽器輸入資料後，又編輯檔案並存檔，此時瀏覽器中會重新刷新，剛剛輸入的資料都消失，所以我們需要使用 Webpack 內建的 Hot Module Replacement。</p>
<p>先修改<code>myApp.vue</code>模擬這個狀況：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;myApp&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;message&quot; placeholder=&apos;Enter here&apos;&gt;&lt;/input&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; message &#125;&#125;</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">    &lt;h3&gt;this is h4&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        message: &apos;Hello&apos;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  #myApp &#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    color: brown;</span><br><span class="line">    background-color: antiquewhite;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>其實截至目前為止，在配置文件中我們都尚未引入 Webpack 物件，所以我現在們要來引入它，這樣我們才能 access 它的 plugin。</p>
<h4 id="webpack-config-js-1"><a href="#webpack-config-js-1" class="headerlink" title="webpack.config.js"></a><code>webpack.config.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">'babel-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>, <span class="attr">use</span>: <span class="string">'vue-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'vue-style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    hor: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 3 行，引入 webpack</li>
<li>第 23 行，因為我們在第 3 行引入了 webpack，所以可以使用<code>webpack.HotModuleReplacementPlugin</code>這個插件達到熱加載的功能</li>
<li>第 14 行，sevServer 這是額外丟給 webpack 的 option。</li>
<li>第 15 行，設定<code>hot</code>為<code>true</code></li>
<li>第 16 行，設定<code>open</code>為<code>true</code>，當我們執行 nom run serve 時，會自動打開瀏覽器視窗</li>
</ul>
<p>接著輸入執行指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
<p>可以看到瀏覽器視窗自動打開了，且 console 的地方可以看到「Hot Module Replacement enabled」熱加載的功能已被成功啟用，此時編輯檔案中的內容再儲存，瀏覽器並不需要重新刷新，內容就會相對被更新。<br><img src="https://i.imgur.com/GbjN3lF.png" alt></p>
<h3 id="Step-7-打包建置專案"><a href="#Step-7-打包建置專案" class="headerlink" title="Step 7.打包建置專案"></a>Step 7.打包建置專案</h3><p>前面 Step 5.提到在開發階段可以使用<code>webpack-dev-server</code>讓專案打包後可以在瀏覽器上被檢視，可是 bundle 後的檔案僅暫存於記憶體中，如果需要將專案打包壓縮後發布，則還是需要改用 <code>webpack</code> 指令。</p>
<p>所以進入 <code>package.json</code> 檔案中，在 <code>scripts</code> 中我們要新增幾個指令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">   <span class="string">"clean"</span>: <span class="string">"rimraf dist"</span>,</span><br><span class="line">   <span class="string">"build"</span>: <span class="string">"npm run clean &amp;&amp; webpack --mode production"</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<p>因為每次執行 webpack 時，都會創造出 dist 資料夾以及其中的檔案，如果每次都要手動刪除 dist 資料夾在執行很麻煩，因此我們這邊使用 rimraf 的指令設定。</p>
<ul>
<li>第 2 行，前面專案中已經安裝 rimraf 依賴，在這邊可以使用它的指令，因此當我們在命令列輸入 <code>npm run clean</code> ，會獨立執行刪除的動作，<code>rimraf dist</code>告訴命令列刪除 dist</li>
<li>第 3 行，這裡實際上有兩個指令用 &amp;&amp; 分隔出來，會先執行<code>npm run clean</code>接著再執行<code>webpack --mode production</code>，是告訴 Webpack：先執行刪除動作，接著跑 webpack 建置(production 模式)動作</li>
</ul>
<p>完整的<code>package.json</code>會長得像這樣：<br><img src="https://i.imgur.com/2qlueIu.png" alt></p>
<p>接著，輸入建置指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>參考 terminal 中的提示，可以看到先執行了 rimraf dist 動作，接著成功完成建置打包的動作。</p>
<p>在專案中可以看到左邊專案結構自動生成了一個 dist 資料夾，裡面有打包後的 js 檔案，以及從 src 中複製過來的 html 檔案。<br><img src="https://i.imgur.com/RjIjkgT.png" alt></p>
<p>因為我們的 html 中沒有 HTTP request 動作，所以可以直接用瀏覽器打開 dist 中的 <code>index.html</code>。如果專案中有 HTTP request ，則需要將專案放到 server 環境中才能正常運作。</p>
<p>用瀏覽器打開<code>index.html</code>，並且檢視開發者工具，可以看到 element 的地方多出了一些內容，這些內容去比對<code>index.html</code>檔案是沒有的，比如說 <code>&lt;style&gt;</code>tag，因為這些內容是在生成過程中透過 JavaScript 動態放入的。<br><img src="https://i.imgur.com/zg17LGA.png" alt></p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><p><a href="https://www.freecodecamp.org/news/how-to-create-a-vue-js-app-using-single-file-components-without-the-cli-7e73e5b8244f/" target="_blank" rel="noopener">How to create a Vue.js app using Single-File Components, without the CLI.</a></p>
</li>
<li><p><a href="https://www.freecodecamp.org/news/getting-started-with-vue-single-file-components-using-webpack-2ae078058688/" target="_blank" rel="noopener">How to get started with Vue single file components using Webpack</a></p>
</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Webpack/">Webpack</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/">Vue.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Webpack-引入模組運用" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/14/Webpack-引入模組運用/">Webpack-引入模組運用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/14/Webpack-引入模組運用/" class="article-date">
	  <time datetime="2019-06-14T07:37:26.021Z" itemprop="datePublished">June 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="環境建置"><a href="#環境建置" class="headerlink" title="環境建置"></a>環境建置</h2><p><strong>1. 首先在專案中加入 npm</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>or 加上<code>-y</code>可以快速建立，略過中間自定義中間自定義的項目輸入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>完畢之後，會看到多了一個 <code>package.json</code> 檔案，並產生一些基本的內容</p>
<p><strong>2. 安裝「開發環境」套件依賴(視需求安裝)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli babel-loader babel-core css-loader vue-loader vue-template-compiler -D</span><br></pre></td></tr></table></figure>
<p>指令後方加上<code>-D</code> 是<code>--save-dev</code>的縮寫，表示會將安裝的套件記載在 <code>package.json</code> 中的 <code>devDependencies</code></p>
<ul>
<li>webpack:轉換並打包程式碼</li>
<li>webpack-cli:用以執行 Webpack 命令</li>
<li>babel-loader:將 ES6 語法轉換為 ES5 需要搭配下面兩個插件依賴使用）<ul>
<li>@babel/core &amp; @babel/preset: Babel-loader 本身無法作用，必須搭配這兩個插件才能將 ES6 語法轉換為 ES5</li>
</ul>
</li>
<li>css-loader:將撰寫的 css 檔，使用 imports 和 url(…) 來回傳到 JavaScript 檔案中，通常都還會搭配 style-loader 作解析的動作。</li>
<li>vue-loader:將 vue 檔案轉換為 JavsSript</li>
<li>vue-template-compiler:將 vue 檔案轉換為 JavsSript</li>
</ul>
<p><strong>3. 安裝「生產環境」套件依賴，例：vue(視需求安裝)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -P</span><br></pre></td></tr></table></figure>
<p>指令後方加上<code>-P</code> 是預設值可以不加，表示會將安裝的套件記載在 <code>package.json</code> 中的 <code>dependencies</code></p>
<p>or 在指令後方加上<code>-S</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -S</span><br></pre></td></tr></table></figure>
<p>指令後方加上<code>-S</code> 是<code>--save</code>的縮寫，表示會將安裝的套件記載在 <code>package.json</code> 中的 <code>dependencies</code></p>
<ul>
<li>vue: JS 前端框架</li>
</ul>
<h2 id="Webpack-概念說明"><a href="#Webpack-概念說明" class="headerlink" title="Webpack 概念說明"></a>Webpack 概念說明</h2><p><img src="https://i.imgur.com/w65GXIx.png" alt></p>
<p>首先定義一個入口 js 檔案，而讓其他所有的 js 檔案都通過這個入口檔案，去執行底下的腳本。</p>
<p>而 Webpack 的執行入口也就是這個入口檔案，通過打包之後，最終會產生出 bundle 後的檔案。</p>
<p>最後，在 <code>html</code>中 <code>script</code> 讀取的檔案，則是打包後的檔案。</p>
<h2 id="專案結構建置"><a href="#專案結構建置" class="headerlink" title="專案結構建置"></a>專案結構建置</h2><p>創建一個 src 資料夾，代表其中的文件為 sourse 來源，在其中有一個主要的 index.js 檔案（命名不限，通常是 main.js 或 index.js)，另外，有個 components 資料夾，裡面放著各種可以重複被利用的模組、函式 js 檔案。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">|_index.js</span><br><span class="line">|_components</span><br><span class="line">  |_add.js</span><br><span class="line">  |_minus.js</span><br><span class="line">  |_ ...其他模組.js</span><br></pre></td></tr></table></figure>
<p>完整的專案結構應該會長得像下方這張圖：<br><img src="https://i.imgur.com/dyK46YO.png" alt></p>
<h3 id="流程說明"><a href="#流程說明" class="headerlink" title="流程說明"></a>流程說明</h3><p>接下來會依序修改幾個檔案：</p>
<ul>
<li>index.html</li>
<li>index.js</li>
<li>add.js</li>
<li>webpack.config.js</li>
<li>package.json</li>
</ul>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>在<code>&lt;/body&gt;</code>前引入打包後的 js 檔案，路徑參考實際專案中的資料夾結構</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;./dist/index.bundle.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h3><p>寫入一些內容，其中 <code>import</code> 是 ES6 語法，透過 <code>import</code> 將其他 component 引入使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">'./components/add'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>
<h3 id="add-js"><a href="#add-js" class="headerlink" title="add.js"></a>add.js</h3><p>透過 export 導出函式內容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-config-js（Webpack-配置重點）"><a href="#webpack-config-js（Webpack-配置重點）" class="headerlink" title="webpack.config.js（Webpack 配置重點）"></a>webpack.config.js（Webpack 配置重點）</h3><ul>
<li>首先要有一個入口檔案，在第 2 行的 entry 屬性中，定義入口檔案的路徑</li>
<li>第 3 行是打包後的轉出文件，在 filename 中定義轉出後的檔案名稱</li>
<li>第 6 行，watch 屬性是定義是否實時自動偵聽，可以省去每次修改都重新手動打包的手續</li>
<li>第 7 行，是定義打包出來的內容是否要壓縮</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'index.bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimize: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上述案例，執行 Webpack 打包，會自動新增一個 dist 資料夾，並將編譯後的檔案存於其中。</p>
<h3 id="webpack-config-js-自定義轉出路徑"><a href="#webpack-config-js-自定義轉出路徑" class="headerlink" title="webpack.config.js-自定義轉出路徑"></a>webpack.config.js-自定義轉出路徑</h3><p>若想自定義轉出路徑，可以新增 <code>path</code>，改寫如下：</p>
<ul>
<li>第 6 行的意思，<ul>
<li>__dirname:在當前的資料夾</li>
<li>resolve:搜尋</li>
<li>build:名稱為 build 的資料夾</li>
</ul>
</li>
<li>第 7 行的意思，<ul>
<li>filename:打包後的檔案命名為’index.bundle.js’,</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>); <span class="comment">// &lt;---- 引入path</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'build'</span>), <span class="comment">// &lt;---- 自定義資料夾路徑</span></span><br><span class="line">    filename: <span class="string">'index.bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimize: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-config-js-打包多個入口檔案"><a href="#webpack-config-js-打包多個入口檔案" class="headerlink" title="webpack.config.js-打包多個入口檔案"></a>webpack.config.js-打包多個入口檔案</h3><ul>
<li>第 4 行的入口，改為物件寫法，多個”key/value” pairs，</li>
<li>第 10 行，轉出檔案的命名以原檔案的命名[name]去做自動命名，方便辨識</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    index2: <span class="string">'./src/index2.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'build'</span>), <span class="comment">// &lt;---- 自定義資料夾路徑</span></span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimize: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>在 script 屬性中新增 build 及 dev，並且定義指令訊息內容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">   &quot;build&quot;: &quot;webpack  --mode production&quot;,</span><br><span class="line">   &quot;dev&quot;: &quot;webpack --mode development&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="執行指令"><a href="#執行指令" class="headerlink" title="執行指令"></a>執行指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>或是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules/.bin/webpack</span><br></pre></td></tr></table></figure>
<h3 id="執行結果"><a href="#執行結果" class="headerlink" title="執行結果"></a>執行結果</h3><p><img src="https://i.imgur.com/NAE9SND.png" alt></p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="https://blog.yowko.com/webpack-vue-file/" target="_blank" rel="noopener">使用 Webpack 來編譯 Vue.js Single File Components (.vue)</a></li>
<li><a href="https://www.bilibili.com/video/av15680564/?spm_id_from=333.788.videocard.2" target="_blank" rel="noopener">老黑 vue2+webpack+es6 技术入门教程（3）</a></li>
<li><a href="https://www.bilibili.com/video/av22421176/?spm_id_from=333.788.videocard.4" target="_blank" rel="noopener">老黑 vue2+webpack+es6 技术入门教程（5）配置文件</a></li>
<li><a href="https://www.freecodecamp.org/news/how-to-create-a-vue-js-app-using-single-file-components-without-the-cli-7e73e5b8244f/" target="_blank" rel="noopener">How to create a Vue.js app using Single-File Components, without the CLI.</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Webpack/">Webpack</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Vue-單一元件檔(Single-file components)" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/Vue-單一元件檔(Single-file components)/">Vue-單一元件檔(Single-file components)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/Vue-單一元件檔(Single-file components)/" class="article-date">
	  <time datetime="2019-06-12T08:27:13.452Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="優缺點"><a href="#優缺點" class="headerlink" title="優缺點"></a>優缺點</h2><p>在許多 Vue 專案中，可以先定義一個「全域組件」<code>Vue.component</code>，接著再創建一個「Vue 實體」<code>new Vue({el:&#39;#app&#39;})</code>，並且將全域組件指定到頁面中的一個容器元素中。</p>
<p>這種方式卻僅適合中小型的專案，但是當專案更於複雜，會出現一些缺點：</p>
<ul>
<li>全域定義問題(Global definitions)：每個組件(component)的命名不能重複。</li>
<li>字串模板問題(String templates)：在元件中的<code>template</code>屬性只能用字串，當使用編譯器(例：vscode)撰寫內容時，無法有效地以文字顏色區分、辨別內容</li>
<li>CSS 不支援問題(No CSS support)：在元件中只能提供 HTML 及 JavaScript，無法支援 CSS</li>
<li>預處理問題(No build step)：元件預設中只能使用 HTML 及 ES5，不能使用預處理工具，例：Babel</li>
</ul>
<p>「<strong>單一元件檔(Single-file component)</strong>」就可以解決上述問題，它同時包含 HTML、JavaScript 及 CSS，一個<code>.vue</code>檔案就代表一個組件，且支援使用 Webpack 或 Browserify 等打包建置工具。</p>
<h2 id="檔案樣板結構"><a href="#檔案樣板結構" class="headerlink" title="檔案樣板結構"></a>檔案樣板結構</h2><p><code>.vue</code>檔案的基本內容結構：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!--HTML內容 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // JAvaScript內容</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    /*CSS內容 */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>若不喜歡 HTML、JavaScript 與 CSS 三者合一，也可以改為將 JavaScript 及 CSS 分離成獨立的檔案再載入的寫法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- my-component.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;This will be pre-compiled&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script src=&quot;./my-component.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;style src=&quot;./my-component.css&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="templete-區塊"><a href="#templete-區塊" class="headerlink" title="templete 區塊"></a>templete 區塊</h3><p><code>&lt;template&gt;</code>樣板裡的內容會被編譯為元件中 <code>templete</code>屬性的值，樣板中只能有一個根元素，也就是說所有內容要包在一個<code>&lt;div&gt;&lt;/div&gt;</code>中。</p>
<p>預設使用 HTML，但可以使用 <code>lang</code> 屬性指定為其他樣板系統，例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template lang=&apos;jade&apos;&gt;...&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="script-區塊"><a href="#script-區塊" class="headerlink" title="script 區塊"></a>script 區塊</h3><p>這個區塊中只能有一個，且最終必須匯出一個 Vue 物件。</p>
<p>預設為 JavaScript，要使用其他 JS 套件可以使用 require()。如果有安裝 babel-loader 在支援 ES2015 的環境中，則可以使用 import 及 export 語法。例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> loadingFunc <span class="keyword">from</span> <span class="string">'../Loading'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    &lt;!--component content --&gt;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>這裡記得 from 的部份，如果使用的是 node_modules 也就是由 npm / yarn 安裝的套件，直接寫套件的名稱；而如果是自己的 JavaScript 檔，則要在檔名前加上 ./。</p>
<h3 id="style-區塊"><a href="#style-區塊" class="headerlink" title="style 區塊"></a>style 區塊</h3><p>一個<code>.vue</code>檔案可以有零到多個<code>&lt;style&gt;</code>，且可以是全域或區域的<code>&lt;style&gt;</code>區塊。</p>
<p><code>&lt;style&gt;</code>的預設為全域的，如果想要限制為區域作用(只在該組件中有效)，可以加上<code>scoped</code>屬性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;...&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>預設為 CSS，也可以更換為 SCSS：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;sass&quot;&gt;...&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="簡易範例"><a href="#簡易範例" class="headerlink" title="簡易範例"></a>簡易範例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; greeting &#125;&#125; World!&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      greeting: &apos;Hello&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">p &#123;</span><br><span class="line">  font-size: 2em;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="撰寫-vue-檔案"><a href="#撰寫-vue-檔案" class="headerlink" title="撰寫.vue 檔案"></a>撰寫.vue 檔案</h2><p>先確定專案的結構，根目錄會有一個<code>index.html</code>作為執行 Vue 的入口;接著在 src 資料架，主要的程式碼都會放在這裡;<code>main.js</code>是程式的進入點，也可以透過 <code>webpack.config.js</code> 設定檔修改、自定義配置;<code>myApp.vue</code>則是這裡的重點，最終會匯出一個 vue 組件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">project根目錄</span><br><span class="line">|_index.html</span><br><span class="line">|_src</span><br><span class="line">    |_main.js</span><br><span class="line">    |_component</span><br><span class="line">        |_myApp.vue</span><br><span class="line">|_build</span><br><span class="line">    |_webpack.config.js</span><br></pre></td></tr></table></figure>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>放置在根目錄底下的<code>index.html</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;hello&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- built files will be auto injected --&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 8 行，這是 Vue 的進入點。</li>
<li>這個檔案中只有最基本的 HTML 內容，沒有 CSS、JavaScript，第 9 行，建置後的檔案會自動引入。</li>
</ul>
<h3 id="myApp-vue"><a href="#myApp-vue" class="headerlink" title="myApp.vue"></a>myApp.vue</h3><p>component 資料夾下方放置所有的 vue 組件，示範一個<code>myApp.vue</code>組件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Hello&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p class="hello"&gt;&#123;&#123; msg &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'這是一個 Vue 組件檔！'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">h1 &#123;</span></span><br><span class="line"><span class="regexp">  color: green;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">.hello &#123;</span></span><br><span class="line"><span class="regexp">  font-size: 1.5em;</span></span><br><span class="line"><span class="regexp">  color: blue;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><p><code>myApp.vue</code>組件建立好之後，接著就可以引入到<code>main.js</code>。<br><code>main.js</code>。是程式的進入點，也可以透過 <code>webpack.config.js</code> 設定檔修改、自定義配置。</p>
<p>基礎的內容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  template: <span class="string">'&lt;h1&gt;Hello Vue&lt;/h1&gt;'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果要引入<code>myApp.vue</code>組件，則要添加一些內容，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> MyApp <span class="keyword">from</span> <span class="string">'./myApp'</span>;</span><br><span class="line"><span class="keyword">import</span> MyApp2 <span class="keyword">from</span> <span class="string">'./myApp2'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123; myApp, myApp2 &#125;,</span><br><span class="line">  template: <span class="string">'&lt;div&gt;&lt;myApp&gt;&lt;/myApp&gt;&lt;myApp2&gt;&lt;/myApp2&gt;&lt;/div&gt;'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>第 1 行<code>import</code>，<code>&#39;vue&#39;</code>是使用 node_modules 由 npm / yarn 安裝的套件，所以可以直接寫套件的名稱。</li>
<li>第 2 行<code>import</code>，<code>&#39;./MyApp&#39;</code>是自己的 JavaScript 檔，則要在檔名前加上 <code>./</code>。</li>
<li>第 8 行，為 vue 實例添加<code>components</code>屬性，其值為引入組件，如有多個組件則用逗號分隔。</li>
<li>第 9 行，這樣就可以將 templete 樣板中改寫為<code>&lt;myApp&gt;&lt;/myApp&gt;</code>，立即使用引入的組件，但切記只能有一個<code>&lt;div&gt;</code>根元素，所以所有內容都要包在其中。</li>
</ul>
<h3 id="組件加在組件中"><a href="#組件加在組件中" class="headerlink" title="組件加在組件中"></a>組件加在組件中</h3><p>除了上述將所有組件都引入到 <code>main.js</code> 中的做法，也可以把 myApp2 組件加在 myApp1 組件中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Hello&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p class="hello"&gt;&#123;&#123; msg &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;myApp2&gt;&lt;/myApp2&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> myApp2 <span class="keyword">from</span> <span class="string">'./myApp2'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'這是一個 Vue 組件檔(myApp1)！'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123; myApp2 &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在第 10 行中，將 <code>myApp</code> 組件檔<code>import</code>進來</li>
<li>接著在第 18 行，將 <code>myApp</code> 組件 assign 到 <code>component</code> 屬性中</li>
<li>最後，在第 5 行，就可以在<code>&lt;template&gt;</code>中使用了</li>
</ul>
<h2 id="組件命名及使用"><a href="#組件命名及使用" class="headerlink" title="組件命名及使用"></a>組件命名及使用</h2><p>不論 vue 組件的命名方式為何，在 html 中使用時，一律為 kebab-case (不分大小寫，一律轉為「小寫並加上 dash 線」)</p>
<p>假設 vue 組件為<code>MyApp</code>，在 HTML 呼叫使用時，需轉換為<code>&lt;my-app&gt;&lt;/my-app&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 三種命名方式</span><br><span class="line"></span><br><span class="line">my-first-component //kebab-case</span><br><span class="line">myFirstComponent    //camelCase</span><br><span class="line">MyFirstComponent //PascalCase</span><br></pre></td></tr></table></figure>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="https://www.freecodecamp.org/news/how-to-create-a-vue-js-app-using-single-file-components-without-the-cli-7e73e5b8244f/" target="_blank" rel="noopener">How to create a Vue.js app using Single-File Components, without the CLI.</a></li>
<li><a href="http://blog.tonycube.com/2017/05/vuejs-10-single-file-components.html" target="_blank" rel="noopener"> 單一元件檔(Single-file components)</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Vue-js/">Vue.js</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/">Vue.js</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-JavaScript-嚴格模式_use strict_" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/JavaScript-嚴格模式_use strict_/">JavaScript-嚴格模式&#34;use strict&#34;</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/JavaScript-嚴格模式_use strict_/" class="article-date">
	  <time datetime="2019-06-12T02:42:38.768Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 JavaScript 中有許多鬆散的寫法，雖然因此讓 JS 的彈性受到讚賞，卻也導致 debug 的困難度。 <code>&quot;use strict&quot;</code> 是新加入的標準，目的在於讓「開發具備更穩定的 JS」更容易，當開發者使用不穩定的語法時，即會跳出警告，讓開發者避免這些寫法。</p>
<p>使用 <strong>strict mode (嚴格模式)</strong> 這個功能，會強迫開發者在開發過程中更為謹慎，用以限制鬆散的 JavaScript 寫法，相比之下也比較不會出錯。</p>
<h2 id="優點與缺點"><a href="#優點與缺點" class="headerlink" title="優點與缺點"></a>優點與缺點</h2><p>優點：</p>
<ul>
<li>撰寫出更為嚴謹的 JS 可以避免不可預知的意外狀況，特別是合作開發時，在 debug 他人撰寫的程式碼會更為簡易。</li>
</ul>
<p>缺點：</p>
<ul>
<li>嚴謹模式限制 JS 的彈性</li>
<li>若專案中使用很多第三方撰寫的 plugin 套件，可能因為嚴格模式而無法運作，會需要修改很多程式</li>
</ul>
<p>建議及解套方法：<br><strong>嚴格模式除了可以寫在全域，也可以用在 function 中，如此一來就不會全域都嚴謹模式，避免影響既有的程式碼或 plugin 套件。</strong></p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><h3 id="全域"><a href="#全域" class="headerlink" title="全域"></a>全域</h3><p><code>&quot;use strict&quot;</code>直接寫在 JS 全域位置的最上方：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>; <span class="comment">//使用 strict mode (嚴格模式)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">123</span>;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="區域"><a href="#區域" class="headerlink" title="區域"></a>區域</h3><p><code>&quot;use strict&quot;</code>寫在函式的開頭位置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>; <span class="comment">//使用 strict mode (嚴格模式)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">123</span>;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果不是寫在函式的開頭位置，則無效。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">  (<span class="string">'use strict'</span>); <span class="comment">//嚴格模式無效</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用嚴格模式的受限"><a href="#使用嚴格模式的受限" class="headerlink" title="使用嚴格模式的受限"></a>使用嚴格模式的受限</h2><ul>
<li>變數未宣告直接賦值</li>
<li>物件中有重複的屬性名稱</li>
<li>刪除已經宣告的錯誤</li>
<li>不能使用 ‘with’ 語法</li>
<li>argument, eval 不能作為變數名稱</li>
<li>保留字不得作為變數名稱，例：implements, interface, let, package, private, protected, static, yield</li>
</ul>
<h2 id="瀏覽器支援"><a href="#瀏覽器支援" class="headerlink" title="瀏覽器支援"></a>瀏覽器支援</h2><ul>
<li>Chrome13 之後都有支援</li>
<li>IE10,11 有支援</li>
<li>FF4 有支援</li>
<li>Safari5.1 之後有支援</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-CSS-Reset" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/CSS-Reset/">CSS-Reset</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/CSS-Reset/" class="article-date">
	  <time datetime="2019-06-12T02:42:10.358Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在每一個瀏覽器，都會有瀏覽器自帶的 CSS 樣式檔案，用以呈現各個瀏覽器特有的預設外觀。雖然有預設樣式的好處是，當開發者沒有特別定義樣式時，至少會有基礎的排版、樣式效果；可是壞處是，當開發者自定義樣式時，經常會因此而出現不可預期的狀況。<br>所以通常在做網頁切版時，都會用 CSS Reset，將瀏覽器預設的樣式通通歸零，包含行距離、字距、margin、padding⋯ 等。<br><img src="https://i.imgur.com/demmH1A.jpg" alt></p>
<h3 id="Reset-版本"><a href="#Reset-版本" class="headerlink" title="Reset 版本"></a>Reset 版本</h3><p>最普遍常用的 CSS-Reset 為 <a href="https://meyerweb.com/eric/tools/css/reset/" target="_blank" rel="noopener">Eric Meyer 版本 </a>，下方也以此版本說明。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* http://meyerweb.com/eric/tools/css/reset/ </span></span><br><span class="line"><span class="comment">   v2.0 | 20110126</span></span><br><span class="line"><span class="comment">   License: none (public domain)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span>,</span><br><span class="line"><span class="selector-tag">div</span>,</span><br><span class="line"><span class="selector-tag">span</span>,</span><br><span class="line"><span class="selector-tag">applet</span>,</span><br><span class="line"><span class="selector-tag">object</span>,</span><br><span class="line"><span class="selector-tag">iframe</span>,</span><br><span class="line"><span class="selector-tag">h1</span>,</span><br><span class="line"><span class="selector-tag">h2</span>,</span><br><span class="line"><span class="selector-tag">h3</span>,</span><br><span class="line"><span class="selector-tag">h4</span>,</span><br><span class="line"><span class="selector-tag">h5</span>,</span><br><span class="line"><span class="selector-tag">h6</span>,</span><br><span class="line"><span class="selector-tag">p</span>,</span><br><span class="line"><span class="selector-tag">blockquote</span>,</span><br><span class="line"><span class="selector-tag">pre</span>,</span><br><span class="line"><span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-tag">abbr</span>,</span><br><span class="line"><span class="selector-tag">acronym</span>,</span><br><span class="line"><span class="selector-tag">address</span>,</span><br><span class="line"><span class="selector-tag">big</span>,</span><br><span class="line"><span class="selector-tag">cite</span>,</span><br><span class="line"><span class="selector-tag">code</span>,</span><br><span class="line"><span class="selector-tag">del</span>,</span><br><span class="line"><span class="selector-tag">dfn</span>,</span><br><span class="line"><span class="selector-tag">em</span>,</span><br><span class="line"><span class="selector-tag">img</span>,</span><br><span class="line"><span class="selector-tag">ins</span>,</span><br><span class="line"><span class="selector-tag">kbd</span>,</span><br><span class="line"><span class="selector-tag">q</span>,</span><br><span class="line"><span class="selector-tag">s</span>,</span><br><span class="line"><span class="selector-tag">samp</span>,</span><br><span class="line"><span class="selector-tag">small</span>,</span><br><span class="line"><span class="selector-tag">strike</span>,</span><br><span class="line"><span class="selector-tag">strong</span>,</span><br><span class="line"><span class="selector-tag">sub</span>,</span><br><span class="line"><span class="selector-tag">sup</span>,</span><br><span class="line"><span class="selector-tag">tt</span>,</span><br><span class="line"><span class="selector-tag">var</span>,</span><br><span class="line"><span class="selector-tag">b</span>,</span><br><span class="line"><span class="selector-tag">u</span>,</span><br><span class="line"><span class="selector-tag">i</span>,</span><br><span class="line"><span class="selector-tag">center</span>,</span><br><span class="line"><span class="selector-tag">dl</span>,</span><br><span class="line"><span class="selector-tag">dt</span>,</span><br><span class="line"><span class="selector-tag">dd</span>,</span><br><span class="line"><span class="selector-tag">ol</span>,</span><br><span class="line"><span class="selector-tag">ul</span>,</span><br><span class="line"><span class="selector-tag">li</span>,</span><br><span class="line"><span class="selector-tag">fieldset</span>,</span><br><span class="line"><span class="selector-tag">form</span>,</span><br><span class="line"><span class="selector-tag">label</span>,</span><br><span class="line"><span class="selector-tag">legend</span>,</span><br><span class="line"><span class="selector-tag">table</span>,</span><br><span class="line"><span class="selector-tag">caption</span>,</span><br><span class="line"><span class="selector-tag">tbody</span>,</span><br><span class="line"><span class="selector-tag">tfoot</span>,</span><br><span class="line"><span class="selector-tag">thead</span>,</span><br><span class="line"><span class="selector-tag">tr</span>,</span><br><span class="line"><span class="selector-tag">th</span>,</span><br><span class="line"><span class="selector-tag">td</span>,</span><br><span class="line"><span class="selector-tag">article</span>,</span><br><span class="line"><span class="selector-tag">aside</span>,</span><br><span class="line"><span class="selector-tag">canvas</span>,</span><br><span class="line"><span class="selector-tag">details</span>,</span><br><span class="line"><span class="selector-tag">embed</span>,</span><br><span class="line"><span class="selector-tag">figure</span>,</span><br><span class="line"><span class="selector-tag">figcaption</span>,</span><br><span class="line"><span class="selector-tag">footer</span>,</span><br><span class="line"><span class="selector-tag">header</span>,</span><br><span class="line"><span class="selector-tag">hgroup</span>,</span><br><span class="line"><span class="selector-tag">menu</span>,</span><br><span class="line"><span class="selector-tag">nav</span>,</span><br><span class="line"><span class="selector-tag">output</span>,</span><br><span class="line"><span class="selector-tag">ruby</span>,</span><br><span class="line"><span class="selector-tag">section</span>,</span><br><span class="line"><span class="selector-tag">summary</span>,</span><br><span class="line"><span class="selector-tag">time</span>,</span><br><span class="line"><span class="selector-tag">mark</span>,</span><br><span class="line"><span class="selector-tag">audio</span>,</span><br><span class="line"><span class="selector-tag">video</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">font</span>: inherit;</span><br><span class="line">  <span class="attribute">vertical-align</span>: baseline;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* HTML5 display-role reset for older browsers */</span></span><br><span class="line"><span class="selector-tag">article</span>,</span><br><span class="line"><span class="selector-tag">aside</span>,</span><br><span class="line"><span class="selector-tag">details</span>,</span><br><span class="line"><span class="selector-tag">figcaption</span>,</span><br><span class="line"><span class="selector-tag">figure</span>,</span><br><span class="line"><span class="selector-tag">footer</span>,</span><br><span class="line"><span class="selector-tag">header</span>,</span><br><span class="line"><span class="selector-tag">hgroup</span>,</span><br><span class="line"><span class="selector-tag">menu</span>,</span><br><span class="line"><span class="selector-tag">nav</span>,</span><br><span class="line"><span class="selector-tag">section</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ol</span>,</span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span>,</span><br><span class="line"><span class="selector-tag">q</span> &#123;</span><br><span class="line">  <span class="attribute">quotes</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">blockquote</span><span class="selector-pseudo">:after</span>,</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:before</span>,</span><br><span class="line"><span class="selector-tag">q</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">''</span>;</span><br><span class="line">  <span class="attribute">content</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">table</span> &#123;</span><br><span class="line">  <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">  <span class="attribute">border-spacing</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到內容即為將很多樣式都歸零，如此一來，不論使用者的瀏覽器版本，在 CSS Reset 之後，都是統一無樣式的版本。而開發過程中，也不會因為 各個瀏覽器各自的預設值，而影響到開發者重新自定義的樣式，進而發生不可預知的狀況。</p>
<h3 id="如何-Reset？"><a href="#如何-Reset？" class="headerlink" title="如何 Reset？"></a>如何 Reset？</h3><p>將 <a href="https://meyerweb.com/eric/tools/css/reset/" target="_blank" rel="noopener">Eric Meyer 版本 </a>寫好的程式碼內容，全部複製一份到個人專案中的一個 CSS 檔案中，可以命名為 reset.css 接著在專案中的每個 html 都引入 reset.css ，這樣就可以確定每個頁面在一開始的樣式都被歸零。</p>
<h3 id="重點提醒！"><a href="#重點提醒！" class="headerlink" title="重點提醒！"></a>重點提醒！</h3><p>一定要在一開始就引入 CSS Reset，避免 CSS Reset 反而蓋掉開發者自行定義的樣式。</p>
<h3 id="資料來源"><a href="#資料來源" class="headerlink" title="資料來源"></a>資料來源</h3><p><a href="https://www.youtube.com/watch?v=WtjXBIyxhw8&amp;t=11s" target="_blank" rel="noopener">金魚都能懂網頁設計入門 : CSS Reset </a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10196528" target="_blank" rel="noopener">小事之 CSS Reset 與 CSS normalize</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/CSS/">CSS</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-JavaScript-BOM與DOM" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/JavaScript-BOM與DOM/">JavaScript-BOM與DOM</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/JavaScript-BOM與DOM/" class="article-date">
	  <time datetime="2019-06-12T02:41:03.679Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>檔案物件模型（Document Object Model, DOM）是瀏覽器的執行規範，提供了結構化的標準方法，將網頁的程式碼及其他程式語言結合起來。開發人員即可以通過文件中物件的屬性、方法和事件來掌控、操縱和建立動態的網頁元素。</p>
<h3 id="DOM-Document-Object-Model"><a href="#DOM-Document-Object-Model" class="headerlink" title="DOM(Document Object Model)"></a>DOM(Document Object Model)</h3><p>每個 DOM 的基礎建置在一個(D)文件上（也就是以 document 作為根基），而由 document 中的每個(O)物件作為出一個個節點，最後由這一個個節點，組成為一個 DOM Tree。</p>
<ul>
<li>D：（文件）瀏覽器當前載入的 document</li>
<li>O：（物件）將 document 中的所有元素視為物件，可以調用其屬性、方法</li>
<li>M：（模型）所有的物件在該結構中都是節點，這些眾多節點組成一個<strong>樹狀結構</strong></li>
</ul>
<p>將 HTML 分解為 DOM:<br><img src="https://i.imgur.com/01xXBTU.jpg" alt></p>
<p>DOM 節點有:</p>
<ol>
<li>元素節點：上圖中<code>&lt;html&gt;</code>、<code>&lt;body&gt;</code>、<code>&lt;p&gt;</code>標籤皆是元素節點。</li>
<li>文本節點:向用户展示的内容，如<code>&lt;li&gt;...&lt;/li&gt;</code>中的 JavaScript、DOM、CSS 等文本。</li>
<li>屬性節點:標籤中的屬性，如<code>&lt;a&gt;</code>標籤中的連結屬性<code>href=&quot;http://www.baidu.com&quot;</code>。</li>
</ol>
<h3 id="查找節點的方法"><a href="#查找節點的方法" class="headerlink" title="查找節點的方法"></a>查找節點的方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:center">說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>getElementById()</td>
<td style="text-align:center">獲取特定 ID 元素的節點</td>
</tr>
<tr>
<td>getElementsByTagName()</td>
<td style="text-align:center">獲取相同元素的節點列表</td>
</tr>
<tr>
<td>getElementsByName</td>
<td style="text-align:center">獲取相同名稱的節點列表</td>
</tr>
<tr>
<td>getAttribute()</td>
<td style="text-align:center">獲得特定元素節點屬性的值</td>
</tr>
<tr>
<td>setAttribute()</td>
<td style="text-align:center">設置特定元素節點屬性的值</td>
</tr>
<tr>
<td>removeAttribute()</td>
<td style="text-align:center">移除特定元素節點的属性</td>
</tr>
</tbody>
</table>
<h3 id="節點的屬性"><a href="#節點的屬性" class="headerlink" title="節點的屬性"></a>節點的屬性</h3><table>
<thead>
<tr>
<th>屬性</th>
<th style="text-align:center">說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodeName</td>
<td style="text-align:center">返回一个字串，其内容是節點的名字</td>
</tr>
<tr>
<td>nodeType</td>
<td style="text-align:center">返回一个整數，這個數值代表给定節點的類型</td>
</tr>
<tr>
<td>nodeValue</td>
<td style="text-align:center">返回給定節點的當前值</td>
</tr>
<tr>
<td>tagName</td>
<td style="text-align:center">獲取元素節點的標籤名</td>
</tr>
<tr>
<td>innerHTML</td>
<td style="text-align:center">獲取元素節點的内容</td>
</tr>
</tbody>
</table>
<h3 id="DOM-操作"><a href="#DOM-操作" class="headerlink" title="DOM 操作"></a>DOM 操作</h3><p>用 DOM API 可以輕鬆地删除、添加和替換節點。<br>| DOM 操作 |说明 |<br>| ————- |:————-:|<br>|creatElement(element) |創建一个新的元素節點|<br>|creatTextNode() |創建一个包含給定文本的新文本節點|<br>|appendChild() |指定節點的最後一個節點列表後添加一个新的子節點|<br>|insertBefore() |將一個給定節點节点插入到一个給定元素節點的給定子節點的前面|<br>|removeChild() |从一个给定元素中删除子节点|<br>|replaceChild() |把一个给定父元素里的一个子节点替换为另外一个节点|</p>
<h3 id="BOM"><a href="#BOM" class="headerlink" title="BOM"></a>BOM</h3><p>瀏覽器物件模型（Browser Object Model,BOM）是瀏覽器提供的附加對象，用於處理 document 以外的所有内容，主要處理瀏覽器窗口和框架，不过通常瀏覽器特定的 JavaScript 也會被看作 BOM 的一部分。</p>
<p>區別：BOM 描述了與瀏覽器進行交互的方法和接口，DOM 描述了處理網頁内容的方法和接口。</p>
<ul>
<li><p>window 物件包含属性：document、navigator、frames、history、location、screen</p>
</li>
<li><p>document 根節點包含子節點：forms、location、anchors、images、links</p>
</li>
</ul>
<p><img src="https://i.imgur.com/y6ohu8g.png" alt></p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><p><a href="https://segmentfault.com/a/1190000000654274" target="_blank" rel="noopener">JavaScript 学习总结（三）BOM 和 DOM 详解</a><br><a href="https://zhuanlan.zhihu.com/p/33672055" target="_blank" rel="noopener">知乎-BOM 和 DOM</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-WebSocket-簡易APP應用" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/WebSocket-簡易APP應用/">WebSocket-簡易APP應用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/WebSocket-簡易APP應用/" class="article-date">
	  <time datetime="2019-06-12T02:40:53.017Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://i.imgur.com/GI6v8jF.png" alt></p>
<p>完整 Demo:參考<a href="https://github.com/leahlin912/SimpleChat" target="_blank" rel="noopener">github 程式碼</a></p>
<h3 id="安裝-nodemon"><a href="#安裝-nodemon" class="headerlink" title="安裝 nodemon"></a>安裝 nodemon</h3><p>持續監視程式碼，一旦我們做了修改並儲存，nodemon 就會自動重新啟動 Node.js 程式，這樣刷新瀏覽器就能看到變更。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/wrE8iOL.png" alt><br>安裝完畢之後，輸入指令，就會啟用「自動偵聽並重啟」的功能：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nodemon index.js</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/Mr6b7Jk.png" alt></p>
<p>nodemon 啟動之後，以可以看到提示字元，如果想要人工手動重啟，也可以輸入<code>rs</code>指令。</p>
<h3 id="前端頁面功能"><a href="#前端頁面功能" class="headerlink" title="前端頁面功能"></a>前端頁面功能</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//建立一個WebSocket實體，建立完成自動連線到server</span></span><br><span class="line"><span class="keyword">var</span> sock = <span class="keyword">new</span> WebSocket(<span class="string">'ws://localhost:5001'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//定義完成連線時的回呼函式</span></span><br><span class="line">sock.onopen = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'status'</span>).setAttribute(<span class="string">'class'</span>, <span class="string">'status_connected'</span>);</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'status'</span>).innerHTML = <span class="string">'&lt;b&gt;Connected&lt;/b&gt;'</span>;</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//設定按鈕監控click事件</span></span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">'button'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">      user: <span class="built_in">document</span>.getElementById(<span class="string">'user'</span>).value,</span><br><span class="line">      msg: <span class="built_in">document</span>.getElementById(<span class="string">'inputBox'</span>).value,</span><br><span class="line">      time: date.getTime(),</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//傳送訊之前要先將物件轉為JSON格式</span></span><br><span class="line">    sock.send(<span class="built_in">JSON</span>.stringify(data));</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'inputBox'</span>).value = <span class="string">''</span>;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//定義收到訊息時的回呼函式</span></span><br><span class="line">  sock.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//將JSON格式先轉為物件</span></span><br><span class="line">    <span class="keyword">var</span> newEvent = <span class="built_in">JSON</span>.parse(event.data);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判斷資料並分類做處理</span></span><br><span class="line">    <span class="keyword">switch</span> (newEvent.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'request'</span>:</span><br><span class="line">        <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(newEvent.time).toLocaleTimeString();</span><br><span class="line">        <span class="keyword">var</span> logArea = <span class="built_in">document</span>.getElementById(<span class="string">'chatArea'</span>);</span><br><span class="line">        <span class="keyword">var</span> newArea = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">        newArea.innerHTML =</span><br><span class="line">          <span class="string">"&lt;div id='logArea'&gt;&lt;div class='card'&gt;"</span> +</span><br><span class="line">          <span class="string">'&lt;p&gt;'</span> +</span><br><span class="line">          newEvent.user +</span><br><span class="line">          <span class="string">':&lt;b&gt;'</span> +</span><br><span class="line">          newEvent.msg +</span><br><span class="line">          <span class="string">'&lt;/b&gt;&lt;small&gt;'</span> +</span><br><span class="line">          time +</span><br><span class="line">          <span class="string">'&lt;/small&gt;&lt;/p&gt;&lt;/br&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">        logArea.appendChild(newArea);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'response'</span>:</span><br><span class="line">        <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(newEvent.time).toLocaleTimeString();</span><br><span class="line">        <span class="keyword">var</span> resArea = <span class="built_in">document</span>.getElementById(<span class="string">'chatArea'</span>);</span><br><span class="line">        <span class="keyword">var</span> newArea = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">        newArea.innerHTML =</span><br><span class="line">          <span class="string">"&lt;div id='resArea'&gt;&lt;div class='card'&gt;"</span> +</span><br><span class="line">          <span class="string">'&lt;p&gt;'</span> +</span><br><span class="line">          newEvent.user +</span><br><span class="line">          <span class="string">':&lt;b&gt;'</span> +</span><br><span class="line">          newEvent.msg +</span><br><span class="line">          <span class="string">'&lt;/b&gt;&lt;small&gt;'</span> +</span><br><span class="line">          time +</span><br><span class="line">          <span class="string">'&lt;/small&gt;&lt;/p&gt;&lt;/br&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">        resArea.appendChild(newArea);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'notify'</span>:</span><br><span class="line">        <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(newEvent.time).toLocaleTimeString();</span><br><span class="line">        <span class="keyword">var</span> resArea = <span class="built_in">document</span>.getElementById(<span class="string">'chatArea'</span>);</span><br><span class="line">        <span class="keyword">var</span> newArea = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">        newArea.innerHTML =</span><br><span class="line">          <span class="string">"&lt;div id='resArea'&gt;&lt;div class='card'&gt;"</span> +</span><br><span class="line">          <span class="string">'&lt;p&gt;'</span> +</span><br><span class="line">          newEvent.user +</span><br><span class="line">          <span class="string">':&lt;b&gt;'</span> +</span><br><span class="line">          newEvent.msg +</span><br><span class="line">          <span class="string">'&lt;/b&gt;&lt;small&gt;'</span> +</span><br><span class="line">          time +</span><br><span class="line">          <span class="string">'&lt;/small&gt;&lt;/p&gt;&lt;/br&gt;&lt;/div&gt;&lt;/div&gt;'</span>;</span><br><span class="line">        resArea.appendChild(newArea);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div id=&apos;status&apos; class=&quot;status_disconnected&quot;&gt;&lt;b style=&quot;color: white&quot;&gt;Disconected&lt;/b&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&apos;content&apos;&gt;</span><br><span class="line">        &lt;span&gt;User:&lt;/span&gt;</span><br><span class="line">        &lt;select id=&apos;user&apos;&gt;</span><br><span class="line">            &lt;option&gt;Amy&lt;/option&gt;</span><br><span class="line">            &lt;option&gt;Bora&lt;/option&gt;</span><br><span class="line">            &lt;option&gt;Cherry&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;textarea id=&apos;inputBox&apos; type=&apos;text&apos; placeholder=&quot;Input message here&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button&gt;Send&lt;/button&gt;</span><br><span class="line">    &lt;div id=&apos;chatArea&apos;&gt;</span><br><span class="line">    &lt;!--     在這裡面處理appendChild() --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#chatArea</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">3px</span> solid white;</span><br><span class="line">  <span class="comment">/* margin-top:10px; */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f1f1f1</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#logArea</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-right</span>: <span class="number">3px</span> solid white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#resArea</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border-left</span>: <span class="number">3px</span> solid white;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.card</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="後端處理"><a href="#後端處理" class="headerlink" title="後端處理"></a>後端處理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//建立server實體</span></span><br><span class="line"><span class="keyword">var</span> webSocketServer = <span class="built_in">require</span>(<span class="string">'ws'</span>).Server;</span><br><span class="line"><span class="keyword">var</span> wss = <span class="keyword">new</span> webSocketServer(&#123; <span class="attr">port</span>: <span class="number">5001</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//設計一個計數器，計算當前連線數量</span></span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定義每當一個連線建立的執行動作</span></span><br><span class="line">wss.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ws</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> user = <span class="string">''</span>;</span><br><span class="line">  count++;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Curent clients:'</span> + count);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'[Server] connected!'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//當某個建立連線的ws發送出message，會執行的動作</span></span><br><span class="line">  ws.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//將JSON格式先轉為物件</span></span><br><span class="line">    <span class="keyword">var</span> newData = <span class="built_in">JSON</span>.parse(data);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`[Server] received <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">    user = newData.user;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//將訊息同步傳給「所有」的用戶端瀏覽器，達成訊息同步</span></span><br><span class="line">    wss.clients.forEach(<span class="function">(<span class="params">client</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//判斷用戶端是否為發出訊息的自己，而做不同的處理</span></span><br><span class="line">      <span class="keyword">if</span> (client == ws) &#123;</span><br><span class="line">        newData.type = <span class="string">'request'</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        newData.type = <span class="string">'response'</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      client.send(<span class="built_in">JSON</span>.stringify(newData), (err) =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (err) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">`[Server] error: <span class="subst">$&#123;err&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//當某個用戶端斷線，所執行的動作</span></span><br><span class="line">  ws.on(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    count--;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'[Server] Lost a client.'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Online clients:'</span> + count);</span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    newData = &#123;</span><br><span class="line">      type: <span class="string">'notify'</span>,</span><br><span class="line">      user: user,</span><br><span class="line">      msg: <span class="string">'[Left chat room]'</span>,</span><br><span class="line">      time: date.getTime(),</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//將斷線訊息同步給所有其他用戶</span></span><br><span class="line">    wss.clients.forEach(<span class="function">(<span class="params">client</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (client != ws) &#123;</span><br><span class="line">        client.send(<span class="built_in">JSON</span>.stringify(newData), (err) =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`[Server] error: <span class="subst">$&#123;err&#125;</span>`</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/WebSocket/">WebSocket</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebSocket/">WebSocket</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-WebSocket-簡易server端實作" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/WebSocket-簡易server端實作/">WebSocket-簡易server端實作</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/WebSocket-簡易server端實作/" class="article-date">
	  <time datetime="2019-06-12T02:40:41.700Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="server-端環境建置"><a href="#server-端環境建置" class="headerlink" title="server 端環境建置"></a>server 端環境建置</h3><p>首先，創立一個簡易的 WebSocket 資料夾專案，裡面有一個 index.js 檔案，以及一個 server 資料夾</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">WebSocket</span><br><span class="line">|--index.html</span><br><span class="line">|--server（forder）</span><br></pre></td></tr></table></figure>
<p>啟用 terminal，進入 WebSocket 專案資料夾中做初始化設定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>接著，系統執行過程中，會被要求輸入幾個欄位(可以直接按 enter 略過到下一個欄位)</p>
<ul>
<li>package name: 你這個 Project 要叫什麼名字</li>
<li>version: 你決定這個 Project 現在該是第幾版</li>
<li>description: Project 基本介紹</li>
<li>entry point: 進入點，如果要跑你的 Project 應該要執行哪個檔案</li>
<li>test command:</li>
<li>git repository:</li>
<li>keywords:</li>
<li>author: 作者(自己)</li>
<li>license: 你這個 Project 是採用什麼授權的</li>
</ul>
<p><img src="https://i.imgur.com/FGCHpqi.png" alt></p>
<p>結束後，可以看到 server 這個資料夾底下，自動產生了一個 Package.json<br><img src="https://i.imgur.com/N6TfdsE.png" alt></p>
<p>接著，在 server 資料夾中，手動新增 index.js 檔案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">WebSocket</span><br><span class="line">|--index.html</span><br><span class="line">|--server（forder）</span><br><span class="line">    |-package.json</span><br><span class="line">    |-index.js</span><br></pre></td></tr></table></figure>
<p>資料架構建置完，接著要在其中安裝 WebSocket:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ws</span><br></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/T6Ll0bd.png" alt><br>安裝完畢後，專案結構中會多出幾個檔案及資料夾，package-lock.json 中紀錄安裝套件相容的版本。<br><img src="https://i.imgur.com/Lgrc7E2.png" alt></p>
<p>到目前為止，基本的環境建置完成。</p>
<h3 id="建置後端-server"><a href="#建置後端-server" class="headerlink" title="建置後端 server"></a>建置後端 server</h3><p>這裡示範模擬 server，以本機端 5001 埠，作為配置 server 的接口。<br>在資料夾中的 index.js 檔案中，寫入以下程式碼：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//導入WebSocket模組</span></span><br><span class="line"><span class="keyword">var</span> WebSocket = <span class="built_in">require</span>(<span class="string">'ws'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引用Server類</span></span><br><span class="line"><span class="keyword">var</span> WebSocketServer = WebSocket.Server;</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立實體(實例化)</span></span><br><span class="line"><span class="keyword">var</span> wss = <span class="keyword">new</span> WebSocketServer(&#123;</span><br><span class="line">  port: <span class="number">5001</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>也可以將上述三行程式碼，簡易化為下述兩行寫法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> WebSocketServer = <span class="built_in">require</span>(<span class="string">'ws'</span>).Server;</span><br><span class="line"><span class="keyword">var</span> wss = <span class="keyword">new</span> WebSocketServer(&#123;</span><br><span class="line">  port: <span class="number">5001</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="啟用-Server"><a href="#啟用-Server" class="headerlink" title="啟用 Server"></a>啟用 Server</h3><p>「control + ` 」快捷鍵開啟 vscode 中的終端機。在終端機可以先確認當前位置，用下述指令進入 server 資料夾中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd server</span><br></pre></td></tr></table></figure>
<p>在 server 中，輸入下述指令，<strong>啟用 server</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node index.js</span><br></pre></td></tr></table></figure>
<p>這樣的狀態就代表 server 正在運轉啟用中<br><img src="https://i.imgur.com/HISdDTV.png" alt></p>
<p>為了確認 server 為啟動狀態，可以由前端測試是否可以連接上後端。<br>在專案中的 index.html 檔案代表前端(用戶端)，在其中輸入指令，透過 server 端的 <code>port:5001</code> 接口，讓前端與後端建立連結：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sock = <span class="keyword">new</span> WebSocket(<span class="string">'ws://localhost:5001'</span>);</span><br><span class="line">sock.onopen = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//當為連結狀態，執行下述動作</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Connected successfully!'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//製造ㄧ秒時間差，再傳送訊息給server</span></span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    sock.send(<span class="string">'Hey there'</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>啟用瀏覽器 locolhost:，查看開發工具 network，可以看到順利連結上 server，並執行從瀏覽器傳送訊息給 server 端。<br><img src="https://i.imgur.com/GK09ig1.png" alt></p>
<h3 id="server-端偵聽事件"><a href="#server-端偵聽事件" class="headerlink" title="server 端偵聽事件"></a>server 端偵聽事件</h3><p>首先建立 WebSocket 的 server 實體，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先引用Server類</span></span><br><span class="line"><span class="comment">//再new出實體，並asign給wss變數</span></span><br><span class="line"><span class="keyword">var</span> WebSocketServer = <span class="built_in">require</span>(<span class="string">'ws'</span>).Server;</span><br><span class="line"><span class="keyword">var</span> wss = <span class="keyword">new</span> WebSocketServer(&#123; <span class="attr">port</span>: <span class="number">5001</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//當偵聽到連結建立時，執行動作</span></span><br><span class="line">wss.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ws</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Connected!'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//當偵測收到訊息時，執行動作</span></span><br><span class="line">  ws.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Receieve:'</span> + message);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>用 vsCode 打開 terminal 查看 sever 端的 log 訊息，可以檢查看到確實有執行動作。<br><img src="https://i.imgur.com/BUhZfhm.png" alt></p>
<h3 id="Server-端回傳訊息給前端"><a href="#Server-端回傳訊息給前端" class="headerlink" title="Server 端回傳訊息給前端"></a>Server 端回傳訊息給前端</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">wss.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ws</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Connected!'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//當偵測收到訊息時，執行動作</span></span><br><span class="line">  ws.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Receieve:'</span> + message);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (message == <span class="string">'Hello'</span>) &#123;</span><br><span class="line">      <span class="comment">//從server回送訊息給前端</span></span><br><span class="line">      ws.send(<span class="string">'Hey there from the server'</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'1'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ws.send(<span class="string">'what did you say?'</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'2'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>從瀏覽器的開發工具 NetWork&gt;WS 可以檢查到前、後端訊息傳遞的狀況。<br><img src="https://i.imgur.com/B3u7osC.png" alt></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/WebSocket/">WebSocket</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebSocket/">WebSocket</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-WebSocket-基礎介紹與實體物件" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/WebSocket-基礎介紹與實體物件/">WebSocket-基礎介紹與實體物件</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/WebSocket-基礎介紹與實體物件/" class="article-date">
	  <time datetime="2019-06-12T02:40:35.391Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="WebSocket-介紹"><a href="#WebSocket-介紹" class="headerlink" title="WebSocket 介紹"></a>WebSocket 介紹</h2><h3 id="What-is-WebSocket"><a href="#What-is-WebSocket" class="headerlink" title="What is WebSocket?"></a>What is WebSocket?</h3><p>WebSocket 是一種<strong>通訊協定(protocal)</strong>，可在單個 TCP 連接上進行全雙工通訊。<br>在 WebSocket API 中，瀏覽器和伺服器只需要完成一次交握，兩者之間就可以建立永續性的連接，並進行雙向資料傳輸。</p>
<h3 id="HTTP-vs-WebSocket"><a href="#HTTP-vs-WebSocket" class="headerlink" title="HTTP vs. WebSocket"></a>HTTP vs. WebSocket</h3><p>最普遍常見的 protocal 是 HTTP，不過 HTTP 有個缺陷：溝通只能由客戶端(browser)發起，無法做到由服務端(server)主動向客戶端發送訊息。效率低，必須不停地發送請求確認連結。</p>
<p>WebSocket 與 HTTP 最大的不同是，WebSocket 是一個持續的雙向連線，不需要重新連線，不需要重新傳送 request，反應更即時。</p>
<ul>
<li>HTTP 是單向請求，必須由 browser 先發出一個 request，server 端才會回傳一個 response</li>
<li>WebSocket 則是完成一次”握手”驗證之後，即可執行雙邊的訊息傳送，或是由 server 端主動回傳訊息<br><img src="https://i.imgur.com/CS6OCqQ.png" alt></li>
</ul>
<h3 id="Why-WebSocket"><a href="#Why-WebSocket" class="headerlink" title="Why WebSocket?"></a>Why WebSocket?</h3><p>當我們需要客戶端 browser 需要與 server 端保持即時、持續的雙向溝通。例：Chat apps、Real time data analytics、Social media</p>
<h2 id="WebSocket-實體的方法與屬性"><a href="#WebSocket-實體的方法與屬性" class="headerlink" title="WebSocket 實體的方法與屬性"></a>WebSocket 實體的方法與屬性</h2><h3 id="建立一個-WebSocket-物件"><a href="#建立一個-WebSocket-物件" class="headerlink" title="建立一個 WebSocket 物件"></a>建立一個 WebSocket 物件</h3><p>首先必須建立一個 WebSocket 物件，才能讓瀏覽器、伺服器以 WebSocket 協定進行通訊，<strong>物件一但被建立，就會自動與伺服器連線</strong>。</p>
<p>WebSocket 的建構子，有兩個參數:</p>
<ol>
<li><p><strong>url</strong><br>URL 的協議類型必須是 ws:// （非加密連線）或是 wss:// （加密連線）</p>
</li>
<li><p><strong>protocols</strong>，選擇性參數<br>一個字串，或是字串組成的陣列，因此一個 Server 可以實作多個 WebSocket 子協定。</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//僅傳入連線用的URL</span></span><br><span class="line"><span class="keyword">new</span> WebSocket(<span class="string">'URL'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定伺服器使用某個sub protocol</span></span><br><span class="line"><span class="keyword">new</span> WebSocket(<span class="string">'URL'</span>, <span class="string">'prorocol'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//指定伺服器執行多個sub protocols</span></span><br><span class="line"><span class="keyword">new</span> WebSocket(<span class="string">'URL'</span>, <span class="string">'protocols[]'</span>);</span><br></pre></td></tr></table></figure>
<p>下方簡單建立了一個新的 WebSocket，連到位於 <a href="http://websocket.org/echo.html" target="_blank" rel="noopener">http://echo.websocket.org</a> 的伺服器。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MySocket = <span class="keyword">new</span> WebSocket(<span class="string">'ws://echo.websocket.org'</span>);</span><br></pre></td></tr></table></figure>
<p>將這段程式碼貼到瀏覽器的 console 中，執行完，查看 Network&gt;WS，已經連上 echo.websocket.org 伺服器。</p>
<p>且再查看 Headers 中，可以看到狀態「101 Web Socket Protocol Handshake」<br><img src="https://i.imgur.com/LncCkaJ.png" alt></p>
<p>WebSOcket 的其他屬性及方法，參考<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket" target="_blank" rel="noopener">這裡</a>。</p>
<h3 id="查詢-WebSocket-狀態"><a href="#查詢-WebSocket-狀態" class="headerlink" title="查詢 WebSocket 狀態"></a>查詢 WebSocket 狀態</h3><p>WebSocket 物件中的 readyState 屬性是表示目前狀態，有四種值，分別代表不同的狀態。</p>
<ul>
<li>WebSocket.CONNECTING:值為 0，表示正在連接中</li>
<li>WebSocket.OPEN:值為 1，表示已連結成功，可以進行通訊</li>
<li>WebSocket.CLOSING:值為 2，表示正在關閉</li>
<li>WebSocket.CLOSED:值為 3，表示為關閉狀態</li>
</ul>
<p>可以透過狀態判斷，來做一些事，以下舉例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> (MySocket.readyStatus) &#123;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.CONNECTING:</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.OPEN:</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.CLOSING:</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> WebSocket.CLOSED:</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="comment">//this would never happen</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="WebSocket-onopen"><a href="#WebSocket-onopen" class="headerlink" title="WebSocket.onopen"></a>WebSocket.onopen</h3><p>WebSocket 物件中的<code>onopen</code>屬性，可以用於定義當連結成功後的回調函式，也就是當 WebSocket 完成連結時，會執行函式中的動作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mySocket.onopen = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>若要指定多個回調函式，可以用<code>addEventListener</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mySocket.addEventListener(<span class="string">'open'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="WebSocket-onclose"><a href="#WebSocket-onclose" class="headerlink" title="WebSocket.onclose"></a>WebSocket.onclose</h3><p>WebSocket 物件中的<code>onopen</code>屬性，可以用於定義當關閉連結後的回調函式，也就是當 WebSocket 關閉連結時，會執行函式中的動作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mySocket.onclose = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">  <span class="comment">//dandle close event</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>若要指定多個回調函式，可以用<code>addEventListener</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mySocket.addEventListener(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//handle close event</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="WebSocket-onmessage"><a href="#WebSocket-onmessage" class="headerlink" title="WebSocket.onmessage"></a>WebSocket.onmessage</h3><p>WebSocket 物件中的<code>onmessage</code>屬性，用於定義收到 server 傳來資料後的回調函式，也就是當偵聽到 sever 傳來訊息的事件，會執行函式中的動作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mySocket.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = event.data;</span><br><span class="line">  <span class="comment">//do something for data</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>若要指定多個回調函式，可以用<code>addEventListener</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mySocket.addEventListener(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> data = event.data;</span><br><span class="line">  <span class="comment">//do something for data</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="WebSocket-onerror"><a href="#WebSocket-onerror" class="headerlink" title="WebSocket.onerror"></a>WebSocket.onerror</h3><p>WebSocket 物件中的<code>onerror</code>屬性，用於定義報錯時的回調函式，也就是當偵聽到錯誤事件，會執行函式中的動作。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mySocket.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//handle error event</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>若要指定多個回調函式，可以用<code>addEventListener</code>方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mySocket.addEventListener(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//handle error event</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="傳資料給伺服器"><a href="#傳資料給伺服器" class="headerlink" title="傳資料給伺服器"></a>傳資料給伺服器</h3><p>WebSocket 的<code>send()</code>方法，用於向伺服器傳送訊息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mySocket.send(<span class="string">'message to server'</span>);</span><br></pre></td></tr></table></figure>
<p>可以傳送的格式，包含字串、Blob、ArrayBuffer。</p>
<p>若要傳送複雜的資料給伺服器，可以用 JSON 格式傳送物件，以下以聊天程式應用舉例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//創建WebSocket實體</span></span><br><span class="line"><span class="keyword">var</span> mySocket = <span class="keyword">new</span> WebSocket(<span class="string">'wss://echo.websocket.org'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//當WebSocket狀態為連線時，執行的動作</span></span><br><span class="line">mySocket.onopen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> msg = &#123;</span><br><span class="line">    type: <span class="string">'message'</span>,</span><br><span class="line">    text: <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).textContent,</span><br><span class="line">    id: <span class="string">'clientID'</span>,</span><br><span class="line">    data: time.getTime(),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//先將資料轉為JSON格式，再傳資料給server</span></span><br><span class="line">  mySocket.send(<span class="built_in">JSON</span>.stringify(msg));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//當瀏覽器從伺服器接收到訊息，偵聽事件被傳入onmessage並觸發函式執行</span></span><br><span class="line">mySocket.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).innerHTML = <span class="string">'&lt;b&gt;Message already sent.&lt;/b&gt;'</span>;</span><br><span class="line">  &#125;, <span class="number">5000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>參考<a href="https://codepen.io/leah-lin/pen/RmjwRG" target="_blank" rel="noopener">codepen 執行結果</a></p>
<h3 id="從伺服器接收訊息"><a href="#從伺服器接收訊息" class="headerlink" title="從伺服器接收訊息"></a>從伺服器接收訊息</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mySocket.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'text'</span>).innerHTML = <span class="string">'&lt;b&gt;Message already sent.&lt;/b&gt;'</span>;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(event);</span><br><span class="line">  <span class="keyword">var</span> f = <span class="built_in">document</span>.getElementById(<span class="string">'chatbox'</span>);</span><br><span class="line">  <span class="keyword">var</span> text = <span class="string">''</span>;</span><br><span class="line">  <span class="keyword">var</span> msg = <span class="built_in">JSON</span>.parse(event.data);</span><br><span class="line">  <span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>(msg.date);</span><br><span class="line">  <span class="keyword">var</span> timeStr = time.toLocaleTimeString();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//僅示範switch判斷，此案例會接到的為'message'</span></span><br><span class="line">  <span class="keyword">switch</span> (msg.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'id'</span>:</span><br><span class="line">      clientID = msg.id;</span><br><span class="line">      setUserName();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'message'</span>:</span><br><span class="line">      text =</span><br><span class="line">        <span class="string">'使用者 &lt;em&gt;'</span> + msg.id + <span class="string">'&lt;/em&gt; :&lt;b&gt;'</span> + msg.text + <span class="string">'&lt;br&gt;&lt;/b&gt;'</span> + <span class="string">'&lt;small&gt;登入於 '</span> + timeStr + <span class="string">'&lt;/small&gt;&lt;br&gt;'</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (text.length) &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">'chatbox'</span>).innerHTML = text;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>參考<a href="https://codepen.io/leah-lin/pen/gJXywe" target="_blank" rel="noopener">codepen 執行結果</a></p>
<h3 id="關閉連線"><a href="#關閉連線" class="headerlink" title="關閉連線"></a>關閉連線</h3><p>WebSocket 的<code>close()</code>方法，用於結束 WebSocket 連線。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mySocket.close();</span><br></pre></td></tr></table></figure>
<p>關閉連線後，再次查看連線狀態為 3，代表狀態為 CLOSED 關閉的狀態。<br><img src="https://i.imgur.com/ABIbzpe.png" alt></p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><p><a href="https://developer.mozilla.org/zh-TW/docs/WebSockets/Writing_WebSocket_client_applications" target="_blank" rel="noopener">MDN web doc - 製作 WebSocket 客戶端應用程式
</a></p>
</li>
<li><p><a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html" target="_blank" rel="noopener">WebSocket 教程 - 阮一峰</a></p>
</li>
<li><p><a href="https://www.youtube.com/playlist?list=PLYxzS__5yYQnRizvwNYWwzFjd9J4ni_Ga" target="_blank" rel="noopener">WebSocket Tutorials - codedamn</a></p>
</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/WebSocket/">WebSocket</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebSocket/">WebSocket</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-JavaScript-獲取當前時間" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/JavaScript-獲取當前時間/">JavaScript-獲取當前時間</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/JavaScript-獲取當前時間/" class="article-date">
	  <time datetime="2019-06-12T02:40:26.837Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Date 物件是基於世界標準時間（UTC） 1970 年 1 月 1 日開始的毫秒數值來儲存時間。</p>
<h3 id="Date-建構子語法"><a href="#Date-建構子語法" class="headerlink" title="Date 建構子語法"></a>Date 建構子語法</h3><p>透過建構子創建 Date 實體物件，建構子有下述四種：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//預設為「當前時間」的物件</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//傳入「某時間」距離標準時間「毫秒數」</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(value);</span><br><span class="line"></span><br><span class="line"><span class="comment">//表示時間日期的字串。</span></span><br><span class="line"><span class="comment">//這個字串應該要能被 Date.parse()方法解析</span></span><br><span class="line"><span class="comment">//格式因瀏覽器而不同，強烈不建議使用解析字串的方式建立 Date 物件。</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(dateString);</span><br><span class="line"></span><br><span class="line"><span class="comment">//不需要全部參數皆傳入，部分參數為選用</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(year, month, day, hour, minutes, seconds, milliseconds);</span><br></pre></td></tr></table></figure>
<ul>
<li>year：表示年份的整數。當數值落在 0 到 99 之間，表示 1900 到 1999 之間的年份。參考下面的範例.</li>
<li>month：表示月份的整數。由 0 開始（一月）到 11 （十二月）。</li>
<li>day：選用。表示月份中第幾天的整數值。</li>
<li>hour：選用。表示小時數的整數值。</li>
<li>minute：選用。表示分鐘數的整數值。</li>
<li>second：選用。表示秒數的整數值。</li>
<li>millisecond：選用。表示毫秒數的整數值。</li>
</ul>
<h3 id="創建-Date-實體"><a href="#創建-Date-實體" class="headerlink" title="創建 Date 實體"></a>創建 Date 實體</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先創建一個Date實體</span></span><br><span class="line"><span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//試著印出實體查看</span></span><br><span class="line"><span class="built_in">console</span>.log(time); <span class="comment">//Wed May 22 2019 10:42:52 GMT+0800 (台北標準時間)</span></span><br></pre></td></tr></table></figure>
<h3 id="Getter"><a href="#Getter" class="headerlink" title="Getter"></a>Getter</h3><p>下方示範幾個常用的 getter，更多請參考<a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Date#Getter" target="_blank" rel="noopener">這裡</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先創建一個Date實體</span></span><br><span class="line"><span class="keyword">var</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">//獲取當前時間(取得的值為一個毫秒数值)</span></span><br><span class="line"><span class="keyword">var</span> theTime = time.getTime(); <span class="comment">//1558492972644</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> timeDetails = &#123;</span><br><span class="line">  year: time.getFullYear(),</span><br><span class="line">  month: time.getMonth() + <span class="number">1</span>,</span><br><span class="line">  date: time.getDate(),</span><br><span class="line">  hour: time.getHours(),</span><br><span class="line">  minute: time.getMinutes(),</span><br><span class="line">  second: time.getSeconds(),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Conversion-getter"><a href="#Conversion-getter" class="headerlink" title="Conversion getter"></a>Conversion getter</h3><p>下方示範將 Date 物件轉換為可閱讀的字串型式，並回傳 Date 的部分資訊</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">time.toLocaleString(); <span class="comment">//2019/5/22 上午10:42:52</span></span><br><span class="line">time.toLocaleDateString(); <span class="comment">//2019/5/22</span></span><br><span class="line">time.toLocaleTimeString(); <span class="comment">//上午10:42:52</span></span><br></pre></td></tr></table></figure>
<p>更多 Date 參考：<a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener">MDN web doc-Date</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/14/Webpack- Single-file components(Vue.)/">Webpack- Single-file components(Vue.)</a></h6>
              <span>June 14, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/14/Webpack-引入模組運用/">Webpack-引入模組運用</a></h6>
              <span>June 14, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/12/Vue-單一元件檔(Single-file components)/">Vue-單一元件檔(Single-file components)</a></h6>
              <span>June 12, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/12/JavaScript-嚴格模式_use strict_/">JavaScript-嚴格模式&#34;use strict&#34;</a></h6>
              <span>June 12, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/12/CSS-Reset/">CSS-Reset</a></h6>
              <span>June 12, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/12/JavaScript-BOM與DOM/">JavaScript-BOM與DOM</a></h6>
              <span>June 12, 2019</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/API/">API</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Bootstrap/">Bootstrap</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">26</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sketch/">Sketch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue-js/">Vue.js</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebSocket/">WebSocket</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/library/">library</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Babel/">Babel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bootstrap/">Bootstrap</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/">GitHub</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a><span class="tag-list-count">27</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">27</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NVM/">NVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sass/">Sass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sketch/">Sketch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Slick/">Slick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/">Vue.js</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/">WebSocket</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awesomefont/">awesomefont</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/boiler/">boiler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carousal/">carousal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carousel/">carousel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/">grid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layuot/">layuot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/library/">library</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/margin/">margin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/navbar/">navbar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/padding/">padding</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/偽元素/">偽元素</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/切版/">切版</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/實作/">實作</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/API/" style="font-size: 12px;">API</a> <a href="/tags/Babel/" style="font-size: 10px;">Babel</a> <a href="/tags/Bootstrap/" style="font-size: 16px;">Bootstrap</a> <a href="/tags/CSS/" style="font-size: 19px;">CSS</a> <a href="/tags/Git/" style="font-size: 13px;">Git</a> <a href="/tags/GitHub/" style="font-size: 11px;">GitHub</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 12px;">Hexo</a> <a href="/tags/JS/" style="font-size: 20px;">JS</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/NVM/" style="font-size: 10px;">NVM</a> <a href="/tags/Node-js/" style="font-size: 14px;">Node.js</a> <a href="/tags/Sass/" style="font-size: 10px;">Sass</a> <a href="/tags/Sketch/" style="font-size: 10px;">Sketch</a> <a href="/tags/Slick/" style="font-size: 10px;">Slick</a> <a href="/tags/Vue/" style="font-size: 17px;">Vue</a> <a href="/tags/Vue-js/" style="font-size: 18px;">Vue.js</a> <a href="/tags/WebSocket/" style="font-size: 12px;">WebSocket</a> <a href="/tags/Webpack/" style="font-size: 13px;">Webpack</a> <a href="/tags/awesomefont/" style="font-size: 11px;">awesomefont</a> <a href="/tags/blog/" style="font-size: 14px;">blog</a> <a href="/tags/boiler/" style="font-size: 11px;">boiler</a> <a href="/tags/carousal/" style="font-size: 10px;">carousal</a> <a href="/tags/carousel/" style="font-size: 10px;">carousel</a> <a href="/tags/git/" style="font-size: 11px;">git</a> <a href="/tags/github/" style="font-size: 12px;">github</a> <a href="/tags/grid/" style="font-size: 10px;">grid</a> <a href="/tags/jQuery/" style="font-size: 11px;">jQuery</a> <a href="/tags/layout/" style="font-size: 17px;">layout</a> <a href="/tags/layuot/" style="font-size: 11px;">layuot</a> <a href="/tags/library/" style="font-size: 11px;">library</a> <a href="/tags/margin/" style="font-size: 10px;">margin</a> <a href="/tags/navbar/" style="font-size: 10px;">navbar</a> <a href="/tags/padding/" style="font-size: 10px;">padding</a> <a href="/tags/偽元素/" style="font-size: 10px;">偽元素</a> <a href="/tags/切版/" style="font-size: 10px;">切版</a> <a href="/tags/實作/" style="font-size: 15px;">實作</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">44</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">13</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Leah&#39;s Blog All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
