<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
  

  <!-- PACE Progress Bar START -->

  
  <title>Leah&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="Leah&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Leah&#39;s Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Leah&#39;s Blog">
  
    <link rel="alternate" href="/atom.xml" title="Leah&#39;s Blog" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-0123456789ABCDEF",
          enable_page_level_ads: true
      });
  </script>
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Categories"; 

  themeMenus["/tags"] = "Tags"; 

  themeMenus["/about"] = "About"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Leah&#39;s Blog" rel="home"> Leah&#39;s Blog </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-Vue-(十二)Props" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/10/05/Vue-(十二)Props/">Vue-(十二)Props</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/10/05/Vue-(十二)Props/" class="article-date">
	  <time datetime="2019-10-05T03:45:51.931Z" itemprop="datePublished">October 5, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="上層傳來的-props"><a href="#上層傳來的-props" class="headerlink" title="上層傳來的 props"></a>上層傳來的 props</h2><p>vue 組件，會使用 <code>props</code> 來接受上層傳來的資料。<code>props</code> 是一個陣列，裡面包含多個字串。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'my-component'</span>, &#123;</span><br><span class="line">  props: [<span class="string">'message'</span>, <span class="string">'name'</span>],</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h1&gt;&#123;&#123;message&#125;&#125; &#123;&#123;name&#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;my-component message=&apos;hello&apos; name=&apos;Leah&apos;&gt;&lt;/my-component&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="props-命名"><a href="#props-命名" class="headerlink" title="props 命名"></a>props 命名</h3><p>假設在 component 中的 props 使用 camelCase、Pascalcase，<strong>在 html 模板中引用時，一律使用 kebab-case</strong> ，因為會需要先經過瀏覽器解析。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'my-component'</span>, &#123;</span><br><span class="line">  props: [<span class="string">'myMesssage'</span>, <span class="string">'MyLastName'</span>],</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;h1&gt;&#123;&#123;myMesssage&#125;&#125; &#123;&#123;MyLastName&#125;&#125;&lt;/h1&gt;`</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">    &lt;my-component my-messsage=&apos;Hello&apos; my-last-name=&apos;Lin&apos; &gt;</span><br><span class="line">  &lt;/my-component&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>如果是在 template 中，即可使用 camelCase、Pascalcase。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'my-component'</span>, &#123;</span><br><span class="line">  props: [<span class="string">'myMesssage'</span>, <span class="string">'MyLastName'</span>],</span><br><span class="line">  template: <span class="string">`&lt;h1&gt;&#123;&#123;myMesssage&#125;&#125; &#123;&#123;MyLastName&#125;&#125;&lt;/h1&gt;`</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;my-component </span></span><br><span class="line"><span class="string">            myMesssage='Hello'</span></span><br><span class="line"><span class="string">            MyLastName='Lin'&gt;</span></span><br><span class="line"><span class="string">        &lt;/my-component&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h2 id="動態綁定-props"><a href="#動態綁定-props" class="headerlink" title="動態綁定 props"></a>動態綁定 props</h2><ol>
<li>先使用<code>v-bind:date=&#39;today&#39;</code>語法，讓 tag 中的 prop 值可以綁定到 data 中的資料，所以此時的 <code>date</code>的值是 ‘20180606’(如果沒有使用<code>v-bind:</code>，直接寫 <code>date=&#39;today&#39;</code>，則 <code>date</code>的值是 ‘today’)</li>
<li>接著在 component ，props 屬性定義傳入的資要有 ‘date’，此時，component 即已經接到上層傳來的資料</li>
<li>接著在 component 中的 template 就可以引出 date 的值</li>
</ol>
<p><img src="https://i.imgur.com/teZlIAM.png" alt></p>
<h3 id="陣列資料"><a href="#陣列資料" class="headerlink" title="陣列資料"></a>陣列資料</h3><p>如果是資料是陣列，在 tag 中可以用 <code>v-for</code> 將 data 中的 <code>users</code> 一個個以 text 叫出來，並用 <code>v-bind:user</code>將<code>users</code>中的值綁定給 user</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;post v-for=&apos;text in users&apos; :user=&apos;text&apos;&gt;</span><br><span class="line">  &lt;/post&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>接著在 component 中，同樣在 props 屬性定義傳入的資料有 ‘user’，此時 component 即已經取得該值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    users: [<span class="string">'Amy'</span>, <span class="string">'Betty'</span>, <span class="string">'Celine'</span>, <span class="string">'Doris'</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    post: &#123;</span><br><span class="line">      props: [<span class="string">'user'</span>],</span><br><span class="line">      template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt;&#123;&#123;user&#125;&#125;&lt;div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="物件資料"><a href="#物件資料" class="headerlink" title="物件資料"></a>物件資料</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;lists v-for=&apos;member in members&apos;</span><br><span class="line">         :name=&apos;member.name&apos; :gender=&apos;member.gender&apos;&gt;</span><br><span class="line">  &lt;/lists&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    members: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'Amy'</span>, <span class="attr">gender</span>: <span class="string">'F'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'Jack'</span>, <span class="attr">gender</span>: <span class="string">'M'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'Cindy'</span>, <span class="attr">gender</span>: <span class="string">'F'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">'Doris'</span>, <span class="attr">gender</span>: <span class="string">'F'</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    lists: &#123;</span><br><span class="line">      props: [<span class="string">'name'</span>, <span class="string">'gender'</span>],</span><br><span class="line">      template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt; &#123;&#123;name&#125;&#125; &lt;small&gt;&#123;&#123;gender&#125;&#125;&lt;/small&gt;&lt;div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果要將一個物件裡面的所有屬性，指定給一個 component 的 props ，除了上述一個個綁定以外，有另外一個特殊用法，將 html 改寫如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;lists v-for=&apos;member in members&apos; v-bind=&apos;member&apos;&gt;</span><br><span class="line">  &lt;/lists&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h3 id="數值資料"><a href="#數值資料" class="headerlink" title="數值資料"></a>數值資料</h3><p>在 tag 中，當要綁定 props 的資料為數值，必須要用 <code>v-bind</code>語法綁定(如果直接寫 number=’1’，則接受到的資料會是字串’1’)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;counter :number=&apos;1&apos;&gt;</span><br><span class="line">  &lt;/counter&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    counter: &#123;</span><br><span class="line">      props: [<span class="string">'number'</span>],</span><br><span class="line">      template: <span class="string">`</span></span><br><span class="line"><span class="string">        &lt;div&gt; &#123;&#123;number+1&#125;&#125;&lt;div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="單向數據流"><a href="#單向數據流" class="headerlink" title="單向數據流"></a>單向數據流</h2><h3 id="上傳下"><a href="#上傳下" class="headerlink" title="上傳下"></a>上傳下</h3><p><a href="https://codepen.io/leah-lin/pen/ZNZMvM" target="_blank" rel="noopener">codepen 結果呈現</a></p>
<p>透過 props 上傳下，上層資料可以往下傳，所以上層資料改變，下層資料也會跟著變；這個資料傳遞的動作是單向的，資料並不會往上傳，所以下層數據改變，並不會影響上層。</p>
<ul>
<li>第 5 行，引入<code>&lt;counter/&gt;</code> 組件，<code>:count=&#39;count&#39;</code>的意思代表，counter 組件的 props 資料中，<code>:count</code>的數據綁定上層<code>&#39;count&#39;</code>的資料。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- html --&gt;</span><br><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;button @click=&apos;count+=1&apos;&gt;Add+1&lt;/button&gt;</span><br><span class="line">  &lt;counter :count=&apos;count&apos;&gt;&lt;/counter&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 1-5 行是上層的資料，第 6-16 行是註冊區域組件的資料。</li>
<li>由上傳下的單向原理解釋，當第 4 行上層 count 的數據變動，第 8 行組件中的 props 數據也會連帶跟著變動；可是，當組件內的 count 數據變動，並不會影響到上層。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    count: <span class="number">10</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    counter: &#123;</span><br><span class="line">      props: [<span class="string">'count'</span>],</span><br><span class="line">      template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt; </span></span><br><span class="line"><span class="string">        &lt;button @click='count+=1'&gt;Add+1&lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="父子階層數據分離"><a href="#父子階層數據分離" class="headerlink" title="父子階層數據分離"></a>父子階層數據分離</h3><p><a href="https://codepen.io/leah-lin/pen/JjjjXPm" target="_blank" rel="noopener">codepen 結果呈現</a></p>
<p>如果不希望上層的數據跟下層的 props 資料發生連動，則可以在下層組件中的 data 自定義一個變數，並僅接住上層一開始傳來的數據做為初始值，並獨立做操作。</p>
<ul>
<li>第 5 行引入 counter 組件，<code>:start=&#39;count&#39;</code>的意思代表，counter 組件的 props 資料中，<code>:start</code>的數據綁定上層<code>&#39;count&#39;</code>的資料。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- html --&gt;</span><br><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;button @click=&apos;count+=1&apos;&gt;Add+1&lt;/button&gt;</span><br><span class="line">  &lt;counter :start=&apos;count&apos;&gt;&lt;/counter&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 8 行 counter 組件的 props 屬性中，start 收到上層傳來的數據時，不直接在組件中的 DOM 做使用，而是先在組件中的 data 重新賦值給 count，接著才在組件中的 DOM (第 16 行) 使用 count。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    count: <span class="number">10</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    counter: &#123;</span><br><span class="line">      props: [<span class="string">'start'</span>],</span><br><span class="line">      data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          count: <span class="keyword">this</span>.start,</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;,</span><br><span class="line">      template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">        &lt;button @click='count+=1'&gt;Add+1&lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="運算上層傳來的資料"><a href="#運算上層傳來的資料" class="headerlink" title="運算上層傳來的資料"></a>運算上層傳來的資料</h3><p><a href="https://codepen.io/leah-lin/pen/NWWWNWR" target="_blank" rel="noopener">codepen 結果呈現</a></p>
<p>如果希望下層資料能夠連動上層傳來的數據，並且直接做運算，可以使用組件中的 computed 做處理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- html --&gt;</span><br><span class="line">&lt;div id=&apos;app&apos;&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;button @click=&apos;count+=1&apos;&gt;Add+1&lt;/button&gt;</span><br><span class="line">  &lt;counter :start=&apos;count&apos;&gt;&lt;/counter&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 10 行的 doubleCount，是直接承接上層傳來的資料做運算所得出的結果。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    count: <span class="number">10</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    counter: &#123;</span><br><span class="line">      props: [<span class="string">'start'</span>],</span><br><span class="line">      computed: &#123;</span><br><span class="line">        doubleCount() &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">this</span>.start * <span class="number">2</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;h1&gt;&#123;&#123;doubleCount&#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      `</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Props-驗證"><a href="#Props-驗證" class="headerlink" title="Props 驗證"></a>Props 驗證</h2><p><a href="https://codepen.io/leah-lin/pen/KKKKzMv" target="_blank" rel="noopener">codepen 結果呈現</a></p>
<h3 id="型別驗證"><a href="#型別驗證" class="headerlink" title="型別驗證"></a>型別驗證</h3><p>當一個組件在多處被使用時，我們會需要事先定義好 props 的資料有哪些，另一方面也必須定義好 props 數據的資料型態，以避免傳入不符合格式型態的資料。例如：應當傳入 Number ，卻傳入 String。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- html --&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;counter :start=&quot;10&quot;&gt;&lt;/counter&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 3 行 props 改傳以物件，其中物件的，key 為 props 的名稱，而 value 則使用 JaveScript 的資料型態，例：<code>start:Number</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'counter'</span>, &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    start: <span class="built_in">Number</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count: <span class="keyword">this</span>.start,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;button @click="count+=1"&gt;+1&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>而當資料型別錯誤時，則會 log 出錯誤訊息</p>
<p><img src="https://i.imgur.com/xqEGB2p.png" alt></p>
<h3 id="資料驗證及預設值"><a href="#資料驗證及預設值" class="headerlink" title="資料驗證及預設值"></a>資料驗證及預設值</h3><p>除了指定 props 型別，也可以去驗證 props 的範圍，此外，也可以在父階層尚未賦值之前給予預設值。</p>
<ul>
<li>在第 3 行，props 中的 key pair 的 value 不直接傳入資料型態，而是改以傳入一個物件，例：<code>start:{...}</code>，物件中再去定義 type(型別) 、default(預設值)、validator(驗證)<ul>
<li>type 的值是 JavaScript 的資料型別</li>
<li>default 的值可以是純值，也可以是函式</li>
<li>validator 的值是函式</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'counter'</span>, &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    start: &#123;</span><br><span class="line">      type: <span class="built_in">Number</span>,</span><br><span class="line">      <span class="comment">// default:0,</span></span><br><span class="line">      <span class="keyword">default</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> app.getSetting();</span><br><span class="line">      &#125;,</span><br><span class="line">      validator(value) &#123;</span><br><span class="line">        <span class="keyword">return</span> value &lt;= <span class="number">10</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count: <span class="keyword">this</span>.start,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;button @click="count+=1"&gt;+1&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果驗證後不符合，則會 log 出錯誤</p>
<p><img src="https://i.imgur.com/oAM1eZd.png" alt></p>
<h3 id="props-驗證的時間點"><a href="#props-驗證的時間點" class="headerlink" title="props 驗證的時間點"></a>props 驗證的時間點</h3><p>props 的檢驗是發生在組件建立「之前」，所以裡面不能用 this.date 或 this.methods！</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Vue-js/">Vue.js</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/">Vue.js</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Vue-設置每頁的title及圖標"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/10/03/Vue-設置每頁的title及圖標/">Vue - 設置每頁的 title 及 圖標</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/10/03/Vue-設置每頁的title及圖標/" class="article-date">
	  <time datetime="2019-10-03T03:56:06.585Z" itemprop="datePublished">October 3, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>過往要設置網頁的 title，直接在 html 中新增一個 <title></title> tag，在其中的文字就會呈現在網頁標籤中。因此，一個基礎 html 網頁的架構大概會長這樣：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">　&lt;title&gt;網頁標題&lt;/title&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">　網頁內容</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>然而，通常網站不僅有一個網頁，建議每個網頁應當有一個專屬的title，以便管理。</p>
<h2 id="透過-Vue-Router-設置每頁的-title"><a href="#透過-Vue-Router-設置每頁的-title" class="headerlink" title="透過 Vue Router 設置每頁的 title"></a>透過 Vue Router 設置每頁的 title</h2><p>step0.在自己專案中的 router.js 或 router/index.js 檔案中(依照個人在專案中的檔案命名及路徑)，確定有引入 vue 及 vue-router</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span>;</span><br><span class="line">Vue.use(VueRouter);</span><br></pre></td></tr></table></figure>
<p>step1. 加入每個路徑頁面的 meta 資料，且於meta中定義title文字。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">     &#123;</span><br><span class="line">        path: <span class="string">'/entrance'</span>,</span><br><span class="line">        name: <span class="string">'entrance'</span>,</span><br><span class="line">        component: Entrance,</span><br><span class="line">        meta: &#123;</span><br><span class="line">            title: <span class="string">'Entrance'</span>&#125;</span><br><span class="line">     &#125;,&#123;</span><br><span class="line">        path: <span class="string">'/login'</span>,</span><br><span class="line">        name: <span class="string">'login'</span>,</span><br><span class="line">        component: Login,</span><br><span class="line">        meta: &#123;</span><br><span class="line">            title: <span class="string">'Login'</span>&#125;</span><br><span class="line">     &#125;,&#123;</span><br><span class="line">        path: <span class="string">'/test'</span>,</span><br><span class="line">        name: <span class="string">'test'</span>,</span><br><span class="line">        component: Test,</span><br><span class="line">        meta: &#123;</span><br><span class="line">            title: <span class="string">'Test'</span>&#125;</span><br><span class="line">     &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>step2.使用全域 <a href="https://router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards" target="_blank" rel="noopener">navigation guards</a> 非同步解析執行：當路徑(router object)前往(to) meta.title 時，瀏覽器的 title 為 meta.title</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.meta.title) &#123;</span><br><span class="line">        <span class="built_in">document</span>.title = to.meta.title</span><br><span class="line">    &#125;</span><br><span class="line">    next();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>step3.最後引出該 router<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure></p>
<h2 id="在-vue-專案中變更-title-圖示"><a href="#在-vue-專案中變更-title-圖示" class="headerlink" title="在 vue 專案中變更 title 圖示"></a>在 vue 專案中變更 title 圖示</h2><p>step1.因為專案會使用 webpack 或 vue-cli 打包，因此將圖片放置根目錄，或是static資料夾中<br><img src="https://i.imgur.com/I3W6uIx.png" alt></p>
<p>step2.在 html 的 <head><meta name="generator" content="Hexo 3.8.0"></head> 中配置圖片及文字。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;標題文字&lt;/title&gt;</span><br><span class="line">    &lt;!--href中的路徑依照專案實際放置圖示的位置。--&gt;</span><br><span class="line">    &lt;link rel=&quot;icon&quot; href=&quot;./../static/favicon.ico&quot; type=“image/x-icon&gt; </span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure></p>
<p>step3.修改 webpack 配置檔案<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  favicon: path.resolve(<span class="string">'/static/favicon.ico'</span>), <span class="comment">//路徑依照專案實際放置圖示的位置</span></span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>step4.重新啟用，並適時清除瀏覽器暫存資料，即可正確圖示畫面<br><img src="https://i.imgur.com/Ckqvvd8.png" alt></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Vue-js/">Vue.js</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/">Vue.js</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-JavaScript-let,const,var差異" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/09/25/JavaScript-let,const,var差異/">JavaScript - let、const、var差異</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/09/25/JavaScript-let,const,var差異/" class="article-date">
	  <time datetime="2019-09-25T08:38:51.280Z" itemprop="datePublished">September 25, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>過去的 JavaScript 使用”<strong>var</strong>“ 來做變數宣告，而在 ES6 中出現了”<strong>let</strong>“及”<strong>const</strong>“，它們的出現最主要是因為 <strong>區塊域(block)</strong> 的概念出現。</p>
<h2 id="ES6的變異"><a href="#ES6的變異" class="headerlink" title="ES6的變異"></a>ES6的變異</h2><p>總體而言，使用 <strong>let</strong> 與 <strong>const</strong> 的變數宣告方式，相較於 <strong>var</strong> 會更為嚴謹，因此建議在開發 ES6 之後的專案，使用<strong>let</strong> 與 <strong>const</strong> 作為變數宣吿，除了讓專案更穩定之外，也可以增加程式碼的可讀性。以下三點解釋：</p>
<ol>
<li>區塊限制使用</li>
<li>變數「不」提升(hositing)</li>
<li>不允許重複宣告</li>
</ol>
<h3 id="區塊限制使用"><a href="#區塊限制使用" class="headerlink" title="區塊限制使用"></a>區塊限制使用</h3><p>使用 <strong>var</strong> 作變數宣告，即使在區塊內宣告，仍可以在區塊之外取用。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> v1 = <span class="string">"hello"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(v1);<span class="comment">//hello</span></span><br></pre></td></tr></table></figure></p>
<p>如果是使用 <strong>let</strong> 或 <strong>const</strong> 作變數宣告，則會受到區塊限制，<strong>無法於區塊之外取用</strong>，會報錯。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> v2 = <span class="string">"hi"</span>;</span><br><span class="line">  <span class="keyword">const</span> v3 = <span class="string">"holla"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(v2);<span class="comment">//Error:Uncaught ReferenceError: v2 is not defined</span></span><br><span class="line"><span class="built_in">console</span>.log(v3);<span class="comment">//Error:Uncaught ReferenceError: v3 is not defined</span></span><br></pre></td></tr></table></figure></p>
<h3 id="變數「不」提升-hositing"><a href="#變數「不」提升-hositing" class="headerlink" title="變數「不」提升(hositing)"></a>變數「不」提升(hositing)</h3><p>javascript的執行環境分為兩階段，會先經歷創建階段(creation)，之後才正式進入程式碼執行階段(exection)。</p>
<p>變數提升指的是在創建階段，電腦的記憶體會為變數先空出記憶體，可是他還不知道它的值為何，會先給予一個undefined的值，而這個動作稱作<a href="https://leahlin912.github.io/2019/05/03/JavaScript-%E6%8F%90%E5%8D%87(Hoisting" target="_blank" rel="noopener">「提升(hoisting)」</a>/)，等到執行階段賦值時，才會將值放進記憶體中。因此在 <strong>var</strong> 變數宣告前，取用該變數是可以的，並不會報錯。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(value);<span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> value = <span class="string">'1234'</span>;</span><br></pre></td></tr></table></figure></p>
<p>然而，在 ES6 的 <strong>let</strong> 及 <strong>const</strong> 移除了 hosting 這個不直覺的現象，在宣告之前不得取用，否則會報錯。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(value1);<span class="comment">//Error:Uncaught ReferenceError: Cannot access 'value1' before initialization</span></span><br><span class="line"><span class="built_in">console</span>.log(value2);<span class="comment">//Error:Uncaught ReferenceError: Cannot access 'value2' before initialization</span></span><br><span class="line"><span class="keyword">let</span> value1 = <span class="string">'1234'</span>;</span><br><span class="line"><span class="keyword">const</span> value2 = <span class="string">'5678'</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="不允許重複宣告"><a href="#不允許重複宣告" class="headerlink" title="不允許重複宣告"></a>不允許重複宣告</h3><p>使用 <strong>var</strong> 重複宣告，並不會報錯，後者會覆蓋掉前者。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="string">'1234'</span>;</span><br><span class="line"><span class="keyword">var</span> value = <span class="string">'5678'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(value);<span class="comment">//5678</span></span><br></pre></td></tr></table></figure></p>
<p>而在 ES6 的 <strong>let</strong> 及 <strong>const</strong> 則移除了這樣不嚴謹的規則，每個變數在該區塊內為獨立宣告，不可重複宣告。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value1 = <span class="string">'1234'</span>;</span><br><span class="line"><span class="keyword">let</span> value1 = <span class="string">'5678'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(value1);<span class="comment">//Error: Identifier 'value1' has already been declared</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> value2 = <span class="string">'1234'</span>;</span><br><span class="line"><span class="keyword">const</span> value2 = <span class="string">'5678'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(value2);<span class="comment">//Error: Identifier 'value2' has already been declared</span></span><br></pre></td></tr></table></figure></p>
<h3 id="綜合變因"><a href="#綜合變因" class="headerlink" title="綜合變因"></a>綜合變因</h3><p>在區塊限制與變數不提升的綜合，會形成的錯誤。例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> value = <span class="string">"1234"</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  value = <span class="string">'5678'</span>;<span class="comment">//Error:Cannot access 'value' before initialization</span></span><br><span class="line">  <span class="keyword">let</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 if 區塊中，使用了會受區塊限制的 let ，則在該區塊中的 value 不得在宣告之前使用。</p>
<h2 id="let-與-const-的區隔"><a href="#let-與-const-的區隔" class="headerlink" title="let 與 const 的區隔"></a>let 與 const 的區隔</h2><h3 id="const"><a href="#const" class="headerlink" title="const"></a>const</h3><p>通常<strong>const</strong> 使用在識別職(identifier)，其意義為不會改變的常數，因此在一開始宣告就必須賦值，否則會出錯。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value1;<span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">const</span> value2;<span class="comment">//Error:Assignment to constant variable.</span></span><br></pre></td></tr></table></figure></p>
<p>且若賦予一般的純值之後，即不可再被更動。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = <span class="string">'1234'</span>;</span><br><span class="line">value = <span class="string">'5678'</span>;<span class="comment">//Error:Assignment to constant variable.</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    name:<span class="string">'Amy'</span>,</span><br><span class="line">    age:<span class="string">'22'</span>,</span><br><span class="line">&#125;;</span><br><span class="line">obj = &#123;</span><br><span class="line">    name:<span class="string">'John'</span>,</span><br><span class="line">    age:<span class="string">'25'</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);<span class="comment">//Error:Assignment to constant variable.</span></span><br></pre></td></tr></table></figure>
<p>然而，如果是給予物件、陣列的值，<strong>在該變數的記憶體存放位置不變的情況之下</strong>，是可以變動的。例：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    name:<span class="string">'Amy'</span>,</span><br><span class="line">    age:<span class="string">'22'</span>,</span><br><span class="line">&#125;;</span><br><span class="line">obj.name = <span class="string">'John'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);<span class="comment">//John</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-JavaScript-Promise" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/09/25/JavaScript-Promise/">JavaScript-Promise</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/09/25/JavaScript-Promise/" class="article-date">
	  <time datetime="2019-09-25T06:08:49.914Z" itemprop="datePublished">September 25, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>JavaScript是<strong>單執行緒</strong>的(single threaded)程式語言，也就是一次只能做一件事情，然而在前端會需要處理許多耗時的<strong>非同步事件</strong>，例如：ajax call API、定時器(setTimeout)、事件監聽(eventListener)，一般我們很常會使用callback回調的方式，然而一層包一層的callback就會出現回呼地獄(callback hell)，層次太多的巢狀callback，讓程式變得複雜、難以追蹤。<br><img src="https://i.imgur.com/ESjO9hz.jpg" alt></p>
<p>為了解決這個問題，<strong>Promise</strong>由此而生。</p>
<h3 id="Event-Queue"><a href="#Event-Queue" class="headerlink" title="Event Queue"></a>Event Queue</h3><p>首先，要理解JavaScript是如何運作的之前，要先認識<a href="https://leahlin912.github.io/2019/05/03/JavaScript-執行緒、同步與非同步/" target="_blank" rel="noopener">事件佇列(Event Queue)</a>，當JavaScript在執行時，會先將「setTimeout」、「ajax」、「click」等<strong>非同步事件</strong>放入<strong>Event Queue</strong>，並且先執行其他Execution context的事件後，才會回過頭去執行Event Queue中的事件。</p>
<p>以下方程式碼舉例，第8行的setTimeout為非同步事件，會先被放入Event Queue中，等待其他事件都處理完畢後，才會回過頭來執行Event Queue中的事件，因此第8行的setTimeout的執行順序在最後面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doWork</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> mom = <span class="string">"媽媽"</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//立即函式</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'打給媽媽'</span>);<span class="comment">//執行順序1</span></span><br><span class="line">        </span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(mom+<span class="string">'回應'</span>)<span class="comment">//執行順序3</span></span><br><span class="line">        &#125;,<span class="number">3000</span>)</span><br><span class="line">    &#125;)();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//立即函式</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'洗碗'</span>)<span class="comment">//執行順序2</span></span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doWork(); <span class="comment">//執行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//執行結果：</span></span><br><span class="line"><span class="comment">//打給媽媽</span></span><br><span class="line"><span class="comment">//洗碗</span></span><br><span class="line"><span class="comment">//媽媽回電</span></span><br></pre></td></tr></table></figure>
<p>這裡在第10行 setTimeout 的時間修改成 0 ，即使等待時間為 0 秒，不過因為 setTimeout 本身為非同步事件會被放入Event Queue，仍然會等所有執行堆中的事件都處理完之後，才執行Event Queue的事件。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doWork</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> mom = <span class="string">"媽媽"</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//立即函式</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'打給媽媽'</span>);<span class="comment">//執行順序1</span></span><br><span class="line">        </span><br><span class="line">        setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(mom+<span class="string">'回應'</span>)<span class="comment">//執行順序3</span></span><br><span class="line">        &#125;,<span class="number">0</span>)</span><br><span class="line">    &#125;)();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//立即函式</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'洗碗'</span>)<span class="comment">//執行順序2</span></span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">doWork(); <span class="comment">//執行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//執行結果：</span></span><br><span class="line"><span class="comment">//打給媽媽</span></span><br><span class="line"><span class="comment">//洗碗</span></span><br><span class="line"><span class="comment">//媽媽回電</span></span><br></pre></td></tr></table></figure></p>
<h3 id="設定一個Promise"><a href="#設定一個Promise" class="headerlink" title="設定一個Promise"></a>設定一個Promise</h3><p>Promise 是一個用來表示<strong>非同步事件執行結果</strong>為成功或失敗的物件，預設的情況有兩個 callback 參數，resolve 代表成功時會執行的函式， reject 代表失敗時會執行的函式。這兩個callback皆會在該非同步事件執行完畢之後呼叫，成功用 .then() 承接，失敗則用 .catch() 承接。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 先定義一個非同步事件</span></span><br><span class="line"><span class="keyword">const</span> newFunc=<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;    </span><br><span class="line">    <span class="comment">//設定一個Promise物件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(value)&#123;</span><br><span class="line">            resolve(<span class="string">'成功'</span>);<span class="comment">//成功則執行resolve callback方法</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            reject(<span class="string">'失敗'</span>);<span class="comment">//失敗則執行reject callback方法</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//呼叫執行非同步事件，結束後用.then()及.catch()承接</span></span><br><span class="line">newFunc(value).then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行結果:'</span>+response);<span class="comment">//執行結果：成功</span></span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行結果:'</span>+error);<span class="comment">//執行結果：失敗</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>實際執行結果</p>
<p><img src="https://i.imgur.com/18oDRUl.png" alt></p>
<h3 id="鏈結Promise"><a href="#鏈結Promise" class="headerlink" title="鏈結Promise"></a>鏈結Promise</h3><p>Promise 的出現是為了解決回呼地獄 (Callback Hell)，所以他強大的地放是用於串連，也就是依序呼叫兩個以上的非同步事件，稱作 Promise Chain。</p>
<p>只要在 Promise chain 中的任一個事件出現錯誤，而執行呼叫 reject callback， Promise chain 的執行會直接中斷，進到catch中。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先定義一個非同步方法，其回傳值為一個 Promise 物件</span></span><br><span class="line"><span class="keyword">const</span> newFunc = <span class="function">(<span class="params">time</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//setTimeout 事件會被放進佇列中，其執行順序會在if之後</span></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        resolve(<span class="string">`<span class="subst">$&#123;time<span class="regexp">/1000&#125;秒 成功`);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">    &#125;,time);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">    </span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">    if(time === 0)&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">        reject(new Error(`$&#123;time/</span><span class="number">1000</span>&#125;</span>秒 失敗`</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//執行 Promise chain</span></span><br><span class="line"><span class="comment">//首個 newFunc resolve 的回傳值由 response1 承接</span></span><br><span class="line">newFunc(<span class="number">1000</span>).then(<span class="function">(<span class="params">response1</span>)=&gt;</span>&#123;/</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行一：'</span>+response1);</span><br><span class="line">    <span class="keyword">return</span> newFunc(<span class="number">1000</span>);<span class="comment">//第二個 newFunc resolve 的回傳值由 response2 承接</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response2</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行二：'</span>+response2);</span><br><span class="line">    <span class="keyword">return</span> newFunc(<span class="number">0</span>);<span class="comment">//第三個 newFunc resolve 的回傳值由 response3 承接</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response3</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行三：'</span>+response3);</span><br><span class="line">    <span class="keyword">return</span> newFunc(<span class="number">1000</span>);<span class="comment">//第四個 newFunc resolve 的回傳值由 response4 承接</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response4</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行四：'</span>+response4);</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;<span class="comment">//catch 承接每次 newFunc reject 拋出的 error</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'失敗：'</span>+error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>實際執行結果</p>
<p><img src="https://i.imgur.com/71XIpVy.png" alt></p>
<h3 id="鏈結接續在catch後方"><a href="#鏈結接續在catch後方" class="headerlink" title="鏈結接續在catch後方"></a>鏈結接續在catch後方</h3><p>在 catch 之後，仍然可以接續 Promise chain。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">newFunc(<span class="number">1000</span>).then(<span class="function">(<span class="params">response1</span>)=&gt;</span>&#123;/</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行一：'</span>+response1);</span><br><span class="line">    <span class="keyword">return</span> newFunc(<span class="number">1000</span>);<span class="comment">//第二個 newFunc resolve 的回傳值由 response2 承接</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response2</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行二：'</span>+response2);</span><br><span class="line">    <span class="keyword">return</span> newFunc(<span class="number">0</span>);<span class="comment">//第三個 newFunc resolve 的回傳值由 response3 承接</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">response3</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'執行三：'</span>+response3);</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">error</span>)=&gt;</span>&#123;<span class="comment">//catch 承接每次 newFunc reject 拋出的 error</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'失敗：'</span>+error)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'最終執行'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>執行結果</p>
<p><img src="https://i.imgur.com/bMhfrZH.png" alt></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Webpack-在vue專案中引用SCSS" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/17/Webpack-在vue專案中引用SCSS/">Webpack-在vue專案中引用SCSS</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/17/Webpack-在vue專案中引用SCSS/" class="article-date">
	  <time datetime="2019-06-17T09:45:07.626Z" itemprop="datePublished">June 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>vue-loader 默認只支持 SASS，如果要是想要使用 SCSS，必須安装 <code>node-sass</code>和<code>sass-loader</code>，並修改相關 webpack 配置。</p>
<h3 id="step1-安裝dependency"><a href="#step1-安裝dependency" class="headerlink" title="step1.安裝dependency"></a>step1.安裝dependency</h3><ul>
<li>sass-loader：將 <code>.scss</code> 檔案轉換成 css</li>
<li>node-sass：因相依性，需搭配使用<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install node-sass sass-loader -D</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>如果尚未安裝<code>style-loader(或 vue-style-loader)</code> 及 <code>css-loader</code>也須一併安裝<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader ss-loader -D</span><br></pre></td></tr></table></figure></p>
<h3 id="step2-修改webpack配置"><a href="#step2-修改webpack配置" class="headerlink" title="step2.修改webpack配置"></a>step2.修改webpack配置</h3><p>概念上，是先透過<code>sass-loader</code>將<code>.scss</code> 檔案轉換成 css，再交給<code>css-loader</code>，最後再交給<code>style-loader</code>處理，所以依照使用loader<br>的順序，將loader寫入rules中。</p>
<p>打開<code>webpack.config.js</code>, 在<code>module</code>里的<code>rules</code>中加上：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">use</span>: [<span class="string">'vue-style-loader'</span>, <span class="string">'css-loader'</span>,<span class="string">'sass-loader'</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="step3-vue文件中的style使用scss"><a href="#step3-vue文件中的style使用scss" class="headerlink" title="step3.vue文件中的style使用scss"></a>step3.vue文件中的style使用scss</h3><p>在 style處聲明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style rel=&quot;stylesheet/scss&quot; lang=&quot;scss&quot;&gt;</span><br><span class="line"> //...內容</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<p>如果僅限於當前組件有效，建議要加上 <code>scoped</code>，避免組件間的樣式互相影響：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;style rel=<span class="string">"stylesheet/scss"</span> lang=<span class="string">"scss"</span> scoped&gt;</span><br><span class="line"> <span class="comment">//...內容</span></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br><span class="line"><span class="regexp">复制</span></span><br></pre></td></tr></table></figure></p>
<p>如果想要將SCSS獨立於另一個檔案中，則可以在<code>&lt;script&gt;</code>開頭用import將檔案引入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script scoped&gt;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'./style.scss'</span>;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>或是使用<code>&lt;style&gt;</code>tag，用<code>src</code>引入SCSS檔案(提示：一個<code>.vue</code>可以有多個<code>&lt;style&gt;</code> tag)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=<span class="string">"scss"</span> src=<span class="string">"./style.scss"</span>&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="補：在Vue專案中引用bootstrap-scss"><a href="#補：在Vue專案中引用bootstrap-scss" class="headerlink" title="補：在Vue專案中引用bootstrap.scss"></a>補：在Vue專案中引用bootstrap.scss</h3><ul>
<li><code>lang=&quot;scss&quot;</code> 告訴 webpack 我們這段 style 開發是使用 SCSS 語言，要使用 <code>sass-loader</code> 編譯。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=<span class="string">"scss"</span> src=<span class="string">"./assets/css/bootstrap/stylesheets/_bootstrap.scss"</span>&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>或是直接在main.js 直接引入 scss（如果是.vue組件檔案，則是在組件中的script用import引入）<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./assets/css/bootstrap/stylesheets/_bootstrap.scss'</span>;</span><br></pre></td></tr></table></figure></p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><p><a href="https://blog.johnwu.cc/article/webpack-4-sass-to-css.html" target="_blank" rel="noopener">Webpack 4 打包 Sass to Css 範例</a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10187723" target="_blank" rel="noopener">vue &amp; vuex 26 - 使用 SASS 管理 CSS - webpack sass-loader</a></p>
<p><a href="https://juejin.im/post/59dc1d28f265da430c10c392" target="_blank" rel="noopener">vue里怎么用scss</a></p>
<p><a href="https://guahsu.io/2017/12/vue-cli-webpack-pug-scss-bootstrap4/" target="_blank" rel="noopener">Vue-cli透過webpack來加載使用pug/scss及BootStrap4
</a></p>
<p><a href="https://flaviocopes.com/vue-using-scss/" target="_blank" rel="noopener">How to use SCSS with Vue.js Single File Components</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Webpack/">Webpack</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scss/">scss</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-FontAwesome-在Vue專案中使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/17/FontAwesome-在Vue專案中使用/">FontAwesome-在Vue專案中使用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/17/FontAwesome-在Vue專案中使用/" class="article-date">
	  <time datetime="2019-06-17T09:44:46.637Z" itemprop="datePublished">June 17, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="step1-安裝"><a href="#step1-安裝" class="headerlink" title="step1.安裝"></a>step1.安裝</h3><ul>
<li><p>在 terminal 使用 npm 安裝 <code>@fortawesome/fontawesome-svg-core</code> 及 <code>@fortawesome/vue-fontawesome</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @fortawesome/fontawesome-svg-core --save</span><br><span class="line">npm install @fortawesome/vue-fontawesome --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>再依照各自使用 font-awesome的版本及需要的樣式作安裝，有Free, Pro, Brands, Solid, Regular</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ npm install @fortawesome/free-solid-svg-icons --save</span><br><span class="line">$ npm install @fortawesome/free-regular-svg-icons --save</span><br><span class="line">$ npm install @fortawesome/free-brands-svg-icons --save</span><br><span class="line"></span><br><span class="line">//Pro</span><br><span class="line">$ npm install @fortawesome/pro-regular-svg-icons --save</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="step2-配置"><a href="#step2-配置" class="headerlink" title="step2.配置"></a>step2.配置</h3><ul>
<li>在 <code>main.js</code>中，先從<code>fontawesome-svg-core</code>叫出library</li>
<li>接著import會使用到的 icon</li>
<li><p>並將 icons 加入 library中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;library&#125; <span class="keyword">from</span> <span class="string">'@fortawesome/fontawesome-svg-core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; faAd &#125; <span class="keyword">from</span> <span class="string">'@fortawesome/free-brands-svg-icons'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; faUsers &#125; <span class="keyword">from</span> <span class="string">'@fortawesome/free-brands-svg-icons'</span>;</span><br><span class="line"></span><br><span class="line">library.add(faAd,faUsers);</span><br></pre></td></tr></table></figure>
</li>
<li><p>最後登記物件，命名為’font-awesome-icon’，即可在HTML或<code>&lt;template&gt;</code>中用<code>&lt;font-awesome-icon&gt;</code>呼叫使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; FontAwesomeIcon &#125; <span class="keyword">from</span> <span class="string">'@fortawesome/vue-fontawesome'</span>;</span><br><span class="line"></span><br><span class="line">Vue.component(<span class="string">'font-awesome-icon'</span>, FontAwesomeIcon);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>補充：也可以將整個Style下的所有icons全部引入，但不建議此方法，會增加不必要的載入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; fab &#125; <span class="keyword">from</span> <span class="string">'@fortawesome/free-brands-svg-icons'</span>;</span><br><span class="line"></span><br><span class="line">library.add(fab);</span><br></pre></td></tr></table></figure></p>
<h3 id="step3-呼叫使用"><a href="#step3-呼叫使用" class="headerlink" title="step3.呼叫使用"></a>step3.呼叫使用</h3><ul>
<li>可以直接在HTML中<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;font-awesome-icon icon=<span class="string">"ad"</span> /&gt;</span><br><span class="line">&lt;font-awesome-icon icon=<span class="string">"users"</span> /&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>或是指定樣式前綴詞<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;font-awesome-icon :icon=<span class="string">"['fa', 'ad']"</span> /&gt;</span><br><span class="line">&lt;font-awesome-icon :icon=<span class="string">"['fab', 'users']"</span> /&gt;</span><br></pre></td></tr></table></figure></p>
<p>可以再加上size，size清單可參考<a href="https://fontawesome.com/how-to-use/on-the-web/styling/sizing-icons" target="_blank" rel="noopener">官網說明</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;font-awesome-icon icon=<span class="string">"ad"</span> size=<span class="string">'lg'</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><ul>
<li><a href="https://ithelp.ithome.com.tw/articles/10209315" target="_blank" rel="noopener">vue-fontawesome</a></li>
<li><a href="https://github.com/FortAwesome/vue-fontawesome" target="_blank" rel="noopener">GitHub project-vue-fontawesome
</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/library/">library</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/awesomefont/">awesomefont</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Webpack- Single-file components(Vue.)" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/14/Webpack- Single-file components(Vue.)/">Webpack- Single-file components(.vue)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/14/Webpack- Single-file components(Vue.)/" class="article-date">
	  <time datetime="2019-06-14T07:37:29.968Z" itemprop="datePublished">June 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 Webpack 4 之後的版本，將 Webpack 及 Webpack-cli 拆開了，因此在載用 webpack 時，也要安裝 webpack-cli。</p>
<p>在搭建(scaffold)一個專案時，最推薦使用框架的命令行介面(command lin interface, CLI)，提供一個入口檔案及配置文件，這個鷹架(scaffolding)會透過開發建置流程，最終將檔案打包出一個生產版本。</p>
<p>一般使用 Vue.js 僅需要用<code>&lt;script&gt;</code>標籤引入 CDN，不需要開發建置過程，專案中即可使用 Vue.js。但是，如果要使用 <strong>Vue single-page components(SFCs)</strong>，就一定要使用開發建置工具，將<code>.vue</code>檔案轉換為瀏覽器可以解讀的 HTML、CSS、JavaScript。</p>
<p>Vue-cli 提供預設好的開發建置流程，但是，如果想要自己定義，則可以使用 Webpack 來搭建(scaffold)專案。</p>
<h2 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h2><p>Webpack 是一個模組打包工具，他可以將多個檔案中的程式碼合併成一個。在 Webpack 出現之前，必須要透過<code>&lt;script&gt;</code>標籤將多個 JavaScript 引入到一個檔案中。</p>
<p>此外，Webpack 也透過 loader 和 plugin 來轉換程式碼，例如將 ES6+ 轉換為 ES5，或是將 SCSS 轉為 CSS。</p>
<h2 id="用-SPC-實作一個-Vue-專案"><a href="#用-SPC-實作一個-Vue-專案" class="headerlink" title="用 SPC 實作一個 Vue 專案"></a>用 SPC 實作一個 Vue 專案</h2><h3 id="Step-1-專案結構建置"><a href="#Step-1-專案結構建置" class="headerlink" title="Step 1.專案結構建置"></a>Step 1.專案結構建置</h3><p>最基本的專案應當要有一個 HTML、一個 JavaScript、一個 Vue 檔案(<code>.vue</code>)，通常會將這些檔案放置在 src 的資料夾中，用以區分這些是我們寫的程式碼，避免跟 Webpack 打包建置後的檔案搞混。</p>
<p>我們會使用到 Webpack ，因此需要一個 Webpack 的配置檔案，通常命名為 <code>webpack.config.js</code></p>
<p>此外，我們會需要 Babel 將 ES6 編譯為 ES5，Babel 本身也是 Webpack 的附加插件，因此需要一個 Babel 的配置檔案，命名為<code>.babelrc.js</code></p>
<p>所以先依照上述說明建置如下專案結構：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src(forder)</span><br><span class="line">  |_myApp2.vue</span><br><span class="line">  |_index.html</span><br><span class="line">  |_main.js</span><br><span class="line">webpack.config.js</span><br><span class="line">.babelrc.js</span><br></pre></td></tr></table></figure>
<p>接著，我們會使用 NPM 來做依賴(dependencies)管理，需要透過指令將專案初始化，並跟著 terminal 視窗中的提示問題完成創建：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>初始化之後，會發現專案中自動多出了一個 <code>package.json</code> 檔案。所以目前應該會看起來像這樣：<br><img src="https://i.imgur.com/C7zlF6f.png" alt></p>
<h3 id="Step-2-安裝套件依賴"><a href="#Step-2-安裝套件依賴" class="headerlink" title="Step 2.安裝套件依賴"></a>Step 2.安裝套件依賴</h3><p>以下是幾個我們目前會使用到到的套件依賴：</p>
<ul>
<li>vue: JS 前端框架</li>
<li>vue-loader &amp; vue-template-compiler:將 vue 檔案轉換為 JavsSript</li>
<li>webpack:轉換並打包程式碼</li>
<li>webpack-cli:用以執行 Webpack 命令</li>
<li>webpack-dev-server:雖然在這裡示範的小專案不會用到 HTTP request，但使我們會需要開發伺服器來服務這個專案</li>
<li>babel-loader:將 ES6 語法轉換為 ES5（需要搭配下面兩個插件依賴使用）</li>
<li>@babel/core &amp; @babel/preset: Babel-loader 本身無法作用，必須搭配這兩個插件才能將 ES6 語法轉換為 ES5</li>
<li>css-loader:會將<code>.vue</code>檔案中的 CSS 或是任何引入的 CSS，載入到 JavaScript 檔案中，並且解析路徑。</li>
<li>vue-style-loader:從 css-loader 取得 CSS 之後，會再透過 vue-style-loader 引入到 HTML 中，會在 HTML 的 head 中，自動生成出一個<code>&lt;style&gt;</code> 標籤。簡單來說，css-loader 是單純將 css 作載入 js;style-loader 則是作解析的動作，讓頁面能讀懂 css，所以它們倆合體就可以達成目的了。</li>
<li>html-webpack-plugin:將 index.html 還有打包後的 js 引入到<code>&lt;head&gt;</code>，並且複製到 dist 資料夾中。</li>
<li>rimraf:讓我們可以從命令行中刪除檔案</li>
</ul>
<p>接著就在命令行中輸入指令，開始安裝依賴：分開發依賴(指令添加<code>-S</code>)、生產依賴(指令添加<code>-D</code>)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -S</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-loader vue-template-compiler webpack webpack-cli webpack-dev-server babel-loader @babel/core @babel/preset-env css-loader vue-style-loader html-webpack-plugin rimraf -D</span><br></pre></td></tr></table></figure>
<p>安裝完畢之後，可以在 package.json 中查看，另外，專案中也會自動產生一個 node_modules 的資料夾，目前專案看起來會像這樣:</p>
<p><img src="https://i.imgur.com/LIu97Tb.png" alt></p>
<h3 id="Step-3-檔案創建"><a href="#Step-3-檔案創建" class="headerlink" title="Step 3.檔案創建"></a>Step 3.檔案創建</h3><h4 id="myApp-vue"><a href="#myApp-vue" class="headerlink" title="myApp.vue"></a><code>myApp.vue</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &apos;Hello World&apos;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app &#123;</span><br><span class="line">  font-size: 18px;</span><br><span class="line">  font-family: &apos;Roboto&apos;, sans-serif;</span><br><span class="line">  color: blue;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a><code>index.html</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Vue Hello World&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a><code>main.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> myApp <span class="keyword">from</span> <span class="string">'./myApp.vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function">(<span class="params">h</span>) =&gt;</span> h(myApp),</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>解釋一下第 6 行程式碼<code>render: h =&gt; h(myApp)</code>的縮寫流程：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完整原始程式碼</span></span><br><span class="line">render: <span class="function"><span class="keyword">function</span> (<span class="params">createElement</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(myApp);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 簡化</span></span><br><span class="line">render(createElement)&#123;</span><br><span class="line">    <span class="keyword">return</span> createElement(myApp);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 再簡化</span></span><br><span class="line">render(h)&#123;</span><br><span class="line">    <span class="keyword">return</span> h(myApp);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 最終簡化</span></span><br><span class="line">render(h) =&gt; h(myApp);</span><br><span class="line"></span><br><span class="line"><span class="comment">// createElement函式是用來生成HTML DOM元素</span></span><br><span class="line"><span class="comment">// 也就是生成HTML結構中的 script 腳笨</span></span><br><span class="line"><span class="comment">// 所以用Hyperscript取h作為程式碼中createElement的簡寫。</span></span><br></pre></td></tr></table></figure>
<h4 id="babelrc-js"><a href="#babelrc-js" class="headerlink" title="babelrc.js"></a><code>babelrc.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [<span class="string">'@babel/preset-env'</span>],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="Step-4-配置-Webpack"><a href="#Step-4-配置-Webpack" class="headerlink" title="Step 4.配置 Webpack"></a>Step 4.配置 Webpack</h3><p>到目前為止，Webpack 需要訪問的檔案都備齊了，接著剩下最後兩件事情：告訴 Webpack 做什麼，並且執行 Webpack。</p>
<h4 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a><code>webpack.config.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">'babel-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>, <span class="attr">use</span>: <span class="string">'vue-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'vue-style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 1、2 行，import 下面會用到的 plugin。注意！loader 不需要 import！（不過在這個案例中，第 9 行的 vue-loader 會需要用到第 17 行的 plugin 才能運作，但是像 babel-loader 就不需要。）</li>
<li>第 4 行，將配置(configuration)以物件的型態 export，這也是執行 Webpack 命令的入口。</li>
<li>第 5 行，這是入口模組(在 Webpack 中，每個檔案都可視為一個模組)，Webpack 需要一個起始點，所以 Webpack 會從<code>main.js</code>開始查找去梳理所有的程式碼。</li>
<li>第 7 行，用<code>rules</code>陣列來告訴 Webpack 在梳理程式碼時要遵循的規則。</li>
<li>第 8 行，這條規則指示 Webpack 當遇到以<code>.js</code>結尾的檔案時，要使用<code>babel-loader</code>去轉換程式碼。</li>
<li>第 9 行，這條規則指示 Webpack 當遇到以<code>.vue</code>結尾的檔案時，要使用<code>vue-loader</code>(需要搭配地 17 行的插件)去轉緩程式碼。</li>
<li>第 10 行，這條規則是指示 Webpack:先用<code>css-loader</code>從<code>.vue</code>檔案中拿出 CSS，再用<code>vue-style-loader</code>轉以<code>&lt;style&gt;</code>tag 的形式放進 HTML 中。(有些檔案會需要兩個 loader 去執行，在 Webpack 中的處理流程有點違反直覺，通常都是從左到右，但是 Webpack 是從右到左。)</li>
<li>第 13 行，用<code>plugins</code>陣列，放入我們需要用到的 plugin</li>
<li>第 14 行，<code>HtmlWebpackPlugin</code>這個 plugin 會獲取<code>index.html</code>檔案的位置，並且將打包後的 JavaScript 檔案以<code>&lt;script&gt;</code>標籤放入其中。此外，這個 plugin 也會複製 HTML 檔案到 build 後的資料夾中。</li>
<li>第 17 行，<code>VueLoaderPlugin</code>這個 plugin 會搭配第 9 行的<code>vue-loader</code>解析<code>.vue</code>檔案。</li>
</ul>
<p>HtmlWebpackPlugin 獲取 index.html 文件的位置，並通過腳本標記將捆綁的 JavaScript 文件添加到其中。</p>
<h3 id="Step-5-執行-Webpack"><a href="#Step-5-執行-Webpack" class="headerlink" title="Step 5.執行 Webpack"></a>Step 5.執行 Webpack</h3><p>上述所有的配置都完成之後，最後只要設定好<code>package.json</code>檔，就可以執行 Webpack 了。在理想的情況下，當我們修改內容，會希望瀏覽器自動更新，因此我們需要<code>webpack-dev-server</code>。</p>
<p><code>webpack-dev-server</code>的功能簡而言之，就是當檔案有修改儲存，重新 bundle 之後，開發人員不需要按下重整按鈕，就會通知瀏覽器執行畫面重整。但是要注意，<code>webpack-dev-server</code>僅適用於開發階段，它產生出的<code>bundle.js</code>並不會出現在我們專案中的 dist 資料夾，而是暫存在記憶體中，所以如果要上正式發布環境，請參考 Step7。</p>
<h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a><code>package.json</code></h4><ul>
<li>在第 7 行<code>scripts</code>的地方刪掉原先預設的<code>test</code>，改以<code>serve</code>取代之。（命名為 serve 並非一定，可以自己隨心改變）</li>
</ul>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"vue-single-file-components"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"webpack.config.js"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"serve"</span>: <span class="string">"webpack-dev-server --mode development"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"vue"</span>: <span class="string">"^2.6.10"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@babel/core"</span>: <span class="string">"^7.4.5"</span>,</span><br><span class="line">    <span class="attr">"@babel/preset-env"</span>: <span class="string">"^7.4.5"</span>,</span><br><span class="line">    <span class="attr">"babel-loader"</span>: <span class="string">"^8.0.6"</span>,</span><br><span class="line">    <span class="attr">"css-loader"</span>: <span class="string">"^3.0.0"</span>,</span><br><span class="line">    <span class="attr">"html-webpack-plugin"</span>: <span class="string">"^3.2.0"</span>,</span><br><span class="line">    <span class="attr">"rimraf"</span>: <span class="string">"^2.6.3"</span>,</span><br><span class="line">    <span class="attr">"vue-loader"</span>: <span class="string">"^15.7.0"</span>,</span><br><span class="line">    <span class="attr">"vue-style-loader"</span>: <span class="string">"^4.1.2"</span>,</span><br><span class="line">    <span class="attr">"vue-template-compiler"</span>: <span class="string">"^2.6.10"</span>,</span><br><span class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.34.0"</span>,</span><br><span class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.3.4"</span>,</span><br><span class="line">    <span class="attr">"webpack-dev-server"</span>: <span class="string">"^3.7.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接著就可以在 terminal 或 command line 裡面輸入指令啟用 Webpack:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
<p>或是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-serve --mode development</span><br></pre></td></tr></table></figure>
<p>如果一切正確無誤，會看到「Compiled successfully」的字樣：<br><img src="https://i.imgur.com/TDHS3mk.png" alt></p>
<p>接著使用瀏覽器打開<code>http://localhost:8080</code>，可以看到畫面正確顯示：<br><img src="https://i.imgur.com/Tk6y4MI.png" alt></p>
<h3 id="Step-6-熱加載"><a href="#Step-6-熱加載" class="headerlink" title="Step 6.熱加載"></a>Step 6.熱加載</h3><p>有個狀況是，當我們在瀏覽器輸入資料後，又編輯檔案並存檔，此時瀏覽器中會重新刷新，剛剛輸入的資料都消失，所以我們需要使用 Webpack 內建的 Hot Module Replacement。</p>
<p>先修改<code>myApp.vue</code>模擬這個狀況：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;myApp&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;message&quot; placeholder=&apos;Enter here&apos;&gt;&lt;/input&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; message &#125;&#125;</span><br><span class="line">    &lt;/h1&gt;</span><br><span class="line">    &lt;h3&gt;this is h4&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        message: &apos;Hello&apos;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">  #myApp &#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    color: brown;</span><br><span class="line">    background-color: antiquewhite;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>其實截至目前為止，在配置文件中我們都尚未引入 Webpack 物件，所以我現在們要來引入它，這樣我們才能 access 它的 plugin。</p>
<h4 id="webpack-config-js-1"><a href="#webpack-config-js-1" class="headerlink" title="webpack.config.js"></a><code>webpack.config.js</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> VueLoaderPlugin = <span class="built_in">require</span>(<span class="string">'vue-loader/lib/plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/main.js'</span>,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">use</span>: <span class="string">'babel-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.vue$/</span>, <span class="attr">use</span>: <span class="string">'vue-loader'</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'vue-style-loader'</span>, <span class="string">'css-loader'</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">    hor: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> VueLoaderPlugin(),</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 3 行，引入 webpack</li>
<li>第 23 行，因為我們在第 3 行引入了 webpack，所以可以使用<code>webpack.HotModuleReplacementPlugin</code>這個插件達到熱加載的功能</li>
<li>第 14 行，sevServer 這是額外丟給 webpack 的 option。</li>
<li>第 15 行，設定<code>hot</code>為<code>true</code></li>
<li>第 16 行，設定<code>open</code>為<code>true</code>，當我們執行 nom run serve 時，會自動打開瀏覽器視窗</li>
</ul>
<p>接著輸入執行指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>
<p>可以看到瀏覽器視窗自動打開了，且 console 的地方可以看到「Hot Module Replacement enabled」熱加載的功能已被成功啟用，此時編輯檔案中的內容再儲存，瀏覽器並不需要重新刷新，內容就會相對被更新。<br><img src="https://i.imgur.com/GbjN3lF.png" alt></p>
<h3 id="Step-7-打包建置專案"><a href="#Step-7-打包建置專案" class="headerlink" title="Step 7.打包建置專案"></a>Step 7.打包建置專案</h3><p>前面 Step 5.提到在開發階段可以使用<code>webpack-dev-server</code>讓專案打包後可以在瀏覽器上被檢視，可是 bundle 後的檔案僅暫存於記憶體中，如果需要將專案打包壓縮後發布，則還是需要改用 <code>webpack</code> 指令。</p>
<p>所以進入 <code>package.json</code> 檔案中，在 <code>scripts</code> 中我們要新增幾個指令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">   <span class="string">"clean"</span>: <span class="string">"rimraf dist"</span>,</span><br><span class="line">   <span class="string">"build"</span>: <span class="string">"npm run clean &amp;&amp; webpack --mode production"</span></span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<p>因為每次執行 webpack 時，都會創造出 dist 資料夾以及其中的檔案，如果每次都要手動刪除 dist 資料夾在執行很麻煩，因此我們這邊使用 rimraf 的指令設定。</p>
<ul>
<li>第 2 行，前面專案中已經安裝 rimraf 依賴，在這邊可以使用它的指令，因此當我們在命令列輸入 <code>npm run clean</code> ，會獨立執行刪除的動作，<code>rimraf dist</code>告訴命令列刪除 dist</li>
<li>第 3 行，這裡實際上有兩個指令用 &amp;&amp; 分隔出來，會先執行<code>npm run clean</code>接著再執行<code>webpack --mode production</code>，是告訴 Webpack：先執行刪除動作，接著跑 webpack 建置(production 模式)動作</li>
</ul>
<p>完整的<code>package.json</code>會長得像這樣：<br><img src="https://i.imgur.com/2qlueIu.png" alt></p>
<p>接著，輸入建置指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>參考 terminal 中的提示，可以看到先執行了 rimraf dist 動作，接著成功完成建置打包的動作。</p>
<p>在專案中可以看到左邊專案結構自動生成了一個 dist 資料夾，裡面有打包後的 js 檔案，以及從 src 中複製過來的 html 檔案。<br><img src="https://i.imgur.com/RjIjkgT.png" alt></p>
<p>因為我們的 html 中沒有 HTTP request 動作，所以可以直接用瀏覽器打開 dist 中的 <code>index.html</code>。如果專案中有 HTTP request ，則需要將專案放到 server 環境中才能正常運作。</p>
<p>用瀏覽器打開<code>index.html</code>，並且檢視開發者工具，可以看到 element 的地方多出了一些內容，這些內容去比對<code>index.html</code>檔案是沒有的，比如說 <code>&lt;style&gt;</code>tag，因為這些內容是在生成過程中透過 JavaScript 動態放入的。<br><img src="https://i.imgur.com/zg17LGA.png" alt></p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><p><a href="https://www.freecodecamp.org/news/how-to-create-a-vue-js-app-using-single-file-components-without-the-cli-7e73e5b8244f/" target="_blank" rel="noopener">How to create a Vue.js app using Single-File Components, without the CLI.</a></p>
</li>
<li><p><a href="https://www.freecodecamp.org/news/getting-started-with-vue-single-file-components-using-webpack-2ae078058688/" target="_blank" rel="noopener">How to get started with Vue single file components using Webpack</a></p>
</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Webpack/">Webpack</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/">Vue.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack.</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Webpack-引入模組運用" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/14/Webpack-引入模組運用/">Webpack-引入模組運用</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/14/Webpack-引入模組運用/" class="article-date">
	  <time datetime="2019-06-14T07:37:26.021Z" itemprop="datePublished">June 14, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="環境建置"><a href="#環境建置" class="headerlink" title="環境建置"></a>環境建置</h2><p><strong>1. 首先在專案中加入 npm</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>or 加上<code>-y</code>可以快速建立，略過中間自定義中間自定義的項目輸入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>
<p>完畢之後，會看到多了一個 <code>package.json</code> 檔案，並產生一些基本的內容</p>
<p><strong>2. 安裝「開發環境」套件依賴(視需求安裝)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli babel-loader babel-core css-loader vue-loader vue-template-compiler -D</span><br></pre></td></tr></table></figure>
<p>指令後方加上<code>-D</code> 是<code>--save-dev</code>的縮寫，表示會將安裝的套件記載在 <code>package.json</code> 中的 <code>devDependencies</code></p>
<ul>
<li>webpack:轉換並打包程式碼</li>
<li>webpack-cli:用以執行 Webpack 命令</li>
<li>babel-loader:將 ES6 語法轉換為 ES5 需要搭配下面兩個插件依賴使用）<ul>
<li>@babel/core &amp; @babel/preset: Babel-loader 本身無法作用，必須搭配這兩個插件才能將 ES6 語法轉換為 ES5</li>
</ul>
</li>
<li>css-loader:將撰寫的 css 檔，使用 imports 和 url(…) 來回傳到 JavaScript 檔案中，通常都還會搭配 style-loader 作解析的動作。</li>
<li>vue-loader:將 vue 檔案轉換為 JavsSript</li>
<li>vue-template-compiler:將 vue 檔案轉換為 JavsSript</li>
</ul>
<p><strong>3. 安裝「生產環境」套件依賴，例：vue(視需求安裝)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -P</span><br></pre></td></tr></table></figure>
<p>指令後方加上<code>-P</code> 是預設值可以不加，表示會將安裝的套件記載在 <code>package.json</code> 中的 <code>dependencies</code></p>
<p>or 在指令後方加上<code>-S</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue -S</span><br></pre></td></tr></table></figure>
<p>指令後方加上<code>-S</code> 是<code>--save</code>的縮寫，表示會將安裝的套件記載在 <code>package.json</code> 中的 <code>dependencies</code></p>
<ul>
<li>vue: JS 前端框架</li>
</ul>
<h2 id="Webpack-概念說明"><a href="#Webpack-概念說明" class="headerlink" title="Webpack 概念說明"></a>Webpack 概念說明</h2><p><img src="https://i.imgur.com/w65GXIx.png" alt></p>
<p>首先定義一個入口 js 檔案，而讓其他所有的 js 檔案都通過這個入口檔案，去執行底下的腳本。</p>
<p>而 Webpack 的執行入口也就是這個入口檔案，通過打包之後，最終會產生出 bundle 後的檔案。</p>
<p>最後，在 <code>html</code>中 <code>script</code> 讀取的檔案，則是打包後的檔案。</p>
<h2 id="專案結構建置"><a href="#專案結構建置" class="headerlink" title="專案結構建置"></a>專案結構建置</h2><p>創建一個 src 資料夾，代表其中的文件為 sourse 來源，在其中有一個主要的 index.js 檔案（命名不限，通常是 main.js 或 index.js)，另外，有個 components 資料夾，裡面放著各種可以重複被利用的模組、函式 js 檔案。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">|_index.js</span><br><span class="line">|_components</span><br><span class="line">  |_add.js</span><br><span class="line">  |_minus.js</span><br><span class="line">  |_ ...其他模組.js</span><br></pre></td></tr></table></figure>
<p>完整的專案結構應該會長得像下方這張圖：<br><img src="https://i.imgur.com/dyK46YO.png" alt></p>
<h3 id="流程說明"><a href="#流程說明" class="headerlink" title="流程說明"></a>流程說明</h3><p>接下來會依序修改幾個檔案：</p>
<ul>
<li>index.html</li>
<li>index.js</li>
<li>add.js</li>
<li>webpack.config.js</li>
<li>package.json</li>
</ul>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>在<code>&lt;/body&gt;</code>前引入打包後的 js 檔案，路徑參考實際專案中的資料夾結構</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;./dist/index.bundle.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h3><p>寫入一些內容，其中 <code>import</code> 是 ES6 語法，透過 <code>import</code> 將其他 component 引入使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">'./components/add'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>));</span><br></pre></td></tr></table></figure>
<h3 id="add-js"><a href="#add-js" class="headerlink" title="add.js"></a>add.js</h3><p>透過 export 導出函式內容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-config-js（Webpack-配置重點）"><a href="#webpack-config-js（Webpack-配置重點）" class="headerlink" title="webpack.config.js（Webpack 配置重點）"></a>webpack.config.js（Webpack 配置重點）</h3><ul>
<li>首先要有一個入口檔案，在第 2 行的 entry 屬性中，定義入口檔案的路徑</li>
<li>第 3 行是打包後的轉出文件，在 filename 中定義轉出後的檔案名稱</li>
<li>第 6 行，watch 屬性是定義是否實時自動偵聽，可以省去每次修改都重新手動打包的手續</li>
<li>第 7 行，是定義打包出來的內容是否要壓縮</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'index.bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimize: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>上述案例，執行 Webpack 打包，會自動新增一個 dist 資料夾，並將編譯後的檔案存於其中。</p>
<h3 id="webpack-config-js-自定義轉出路徑"><a href="#webpack-config-js-自定義轉出路徑" class="headerlink" title="webpack.config.js-自定義轉出路徑"></a>webpack.config.js-自定義轉出路徑</h3><p>若想自定義轉出路徑，可以新增 <code>path</code>，改寫如下：</p>
<ul>
<li>第 6 行的意思，<ul>
<li>__dirname:在當前的資料夾</li>
<li>resolve:搜尋</li>
<li>build:名稱為 build 的資料夾</li>
</ul>
</li>
<li>第 7 行的意思，<ul>
<li>filename:打包後的檔案命名為’index.bundle.js’,</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>); <span class="comment">// &lt;---- 引入path</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'build'</span>), <span class="comment">// &lt;---- 自定義資料夾路徑</span></span><br><span class="line">    filename: <span class="string">'index.bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimize: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="webpack-config-js-打包多個入口檔案"><a href="#webpack-config-js-打包多個入口檔案" class="headerlink" title="webpack.config.js-打包多個入口檔案"></a>webpack.config.js-打包多個入口檔案</h3><ul>
<li>第 4 行的入口，改為物件寫法，多個”key/value” pairs，</li>
<li>第 10 行，轉出檔案的命名以原檔案的命名[name]去做自動命名，方便辨識</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">'./src/index.js'</span>,</span><br><span class="line">    index2: <span class="string">'./src/index2.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'build'</span>), <span class="comment">// &lt;---- 自定義資料夾路徑</span></span><br><span class="line">    filename: <span class="string">'[name].bundle.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: <span class="literal">true</span>,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimize: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><p>在 script 屬性中新增 build 及 dev，並且定義指令訊息內容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">   &quot;build&quot;: &quot;webpack  --mode production&quot;,</span><br><span class="line">   &quot;dev&quot;: &quot;webpack --mode development&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="執行指令"><a href="#執行指令" class="headerlink" title="執行指令"></a>執行指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<p>或是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules/.bin/webpack</span><br></pre></td></tr></table></figure>
<h3 id="執行結果"><a href="#執行結果" class="headerlink" title="執行結果"></a>執行結果</h3><p><img src="https://i.imgur.com/NAE9SND.png" alt></p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="https://blog.yowko.com/webpack-vue-file/" target="_blank" rel="noopener">使用 Webpack 來編譯 Vue.js Single File Components (.vue)</a></li>
<li><a href="https://www.bilibili.com/video/av15680564/?spm_id_from=333.788.videocard.2" target="_blank" rel="noopener">老黑 vue2+webpack+es6 技术入门教程（3）</a></li>
<li><a href="https://www.bilibili.com/video/av22421176/?spm_id_from=333.788.videocard.4" target="_blank" rel="noopener">老黑 vue2+webpack+es6 技术入门教程（5）配置文件</a></li>
<li><a href="https://www.freecodecamp.org/news/how-to-create-a-vue-js-app-using-single-file-components-without-the-cli-7e73e5b8244f/" target="_blank" rel="noopener">How to create a Vue.js app using Single-File Components, without the CLI.</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Webpack/">Webpack</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Webpack/">Webpack</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Vue-單一元件檔(Single-file components)" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/Vue-單一元件檔(Single-file components)/">Vue-單一元件檔(Single-file components)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/Vue-單一元件檔(Single-file components)/" class="article-date">
	  <time datetime="2019-06-12T08:27:13.452Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="優缺點"><a href="#優缺點" class="headerlink" title="優缺點"></a>優缺點</h2><p>在許多 Vue 專案中，可以先定義一個「全域組件」<code>Vue.component</code>，接著再創建一個「Vue 實體」<code>new Vue({el:&#39;#app&#39;})</code>，並且將全域組件指定到頁面中的一個容器元素中。</p>
<p>這種方式卻僅適合中小型的專案，但是當專案更於複雜，會出現一些缺點：</p>
<ul>
<li>全域定義問題(Global definitions)：每個組件(component)的命名不能重複。</li>
<li>字串模板問題(String templates)：在元件中的<code>template</code>屬性只能用字串，當使用編譯器(例：vscode)撰寫內容時，無法有效地以文字顏色區分、辨別內容</li>
<li>CSS 不支援問題(No CSS support)：在元件中只能提供 HTML 及 JavaScript，無法支援 CSS</li>
<li>預處理問題(No build step)：元件預設中只能使用 HTML 及 ES5，不能使用預處理工具，例：Babel</li>
</ul>
<p>「<strong>單一元件檔(Single-file component)</strong>」就可以解決上述問題，它同時包含 HTML、JavaScript 及 CSS，一個<code>.vue</code>檔案就代表一個組件，且支援使用 Webpack 或 Browserify 等打包建置工具。</p>
<h2 id="檔案樣板結構"><a href="#檔案樣板結構" class="headerlink" title="檔案樣板結構"></a>檔案樣板結構</h2><p><code>.vue</code>檔案的基本內容結構：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;!--HTML內容 --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // JAvaScript內容</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    /*CSS內容 */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>若不喜歡 HTML、JavaScript 與 CSS 三者合一，也可以改為將 JavaScript 及 CSS 分離成獨立的檔案再載入的寫法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- my-component.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;This will be pre-compiled&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script src=&quot;./my-component.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;style src=&quot;./my-component.css&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="templete-區塊"><a href="#templete-區塊" class="headerlink" title="templete 區塊"></a>templete 區塊</h3><p><code>&lt;template&gt;</code>樣板裡的內容會被編譯為元件中 <code>templete</code>屬性的值，樣板中只能有一個根元素，也就是說所有內容要包在一個<code>&lt;div&gt;&lt;/div&gt;</code>中。</p>
<p>預設使用 HTML，但可以使用 <code>lang</code> 屬性指定為其他樣板系統，例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template lang=&apos;jade&apos;&gt;...&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="script-區塊"><a href="#script-區塊" class="headerlink" title="script 區塊"></a>script 區塊</h3><p>這個區塊中只能有一個，且最終必須匯出一個 Vue 物件。</p>
<p>預設為 JavaScript，要使用其他 JS 套件可以使用 require()。如果有安裝 babel-loader 在支援 ES2015 的環境中，則可以使用 import 及 export 語法。例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> loadingFunc <span class="keyword">from</span> <span class="string">'../Loading'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    &lt;!--component content --&gt;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>這裡記得 from 的部份，如果使用的是 node_modules 也就是由 npm / yarn 安裝的套件，直接寫套件的名稱；而如果是自己的 JavaScript 檔，則要在檔名前加上 ./。</p>
<h3 id="style-區塊"><a href="#style-區塊" class="headerlink" title="style 區塊"></a>style 區塊</h3><p>一個<code>.vue</code>檔案可以有零到多個<code>&lt;style&gt;</code>，且可以是全域或區域的<code>&lt;style&gt;</code>區塊。</p>
<p><code>&lt;style&gt;</code>的預設為全域的，如果想要限制為區域作用(只在該組件中有效)，可以加上<code>scoped</code>屬性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;...&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<p>預設為 CSS，也可以更換為 SCSS：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;sass&quot;&gt;...&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="簡易範例"><a href="#簡易範例" class="headerlink" title="簡易範例"></a>簡易範例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;&#123;&#123; greeting &#125;&#125; World!&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  data: function () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      greeting: &apos;Hello&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">p &#123;</span><br><span class="line">  font-size: 2em;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="撰寫-vue-檔案"><a href="#撰寫-vue-檔案" class="headerlink" title="撰寫.vue 檔案"></a>撰寫.vue 檔案</h2><p>先確定專案的結構，根目錄會有一個<code>index.html</code>作為執行 Vue 的入口;接著在 src 資料架，主要的程式碼都會放在這裡;<code>main.js</code>是程式的進入點，也可以透過 <code>webpack.config.js</code> 設定檔修改、自定義配置;<code>myApp.vue</code>則是這裡的重點，最終會匯出一個 vue 組件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">project根目錄</span><br><span class="line">|_index.html</span><br><span class="line">|_src</span><br><span class="line">    |_main.js</span><br><span class="line">    |_component</span><br><span class="line">        |_myApp.vue</span><br><span class="line">|_build</span><br><span class="line">    |_webpack.config.js</span><br></pre></td></tr></table></figure>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><p>放置在根目錄底下的<code>index.html</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;hello&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- built files will be auto injected --&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>第 8 行，這是 Vue 的進入點。</li>
<li>這個檔案中只有最基本的 HTML 內容，沒有 CSS、JavaScript，第 9 行，建置後的檔案會自動引入。</li>
</ul>
<h3 id="myApp-vue"><a href="#myApp-vue" class="headerlink" title="myApp.vue"></a>myApp.vue</h3><p>component 資料夾下方放置所有的 vue 組件，示範一個<code>myApp.vue</code>組件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Hello&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p class="hello"&gt;&#123;&#123; msg &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'這是一個 Vue 組件檔！'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">h1 &#123;</span></span><br><span class="line"><span class="regexp">  color: green;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">.hello &#123;</span></span><br><span class="line"><span class="regexp">  font-size: 1.5em;</span></span><br><span class="line"><span class="regexp">  color: blue;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>
<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><p><code>myApp.vue</code>組件建立好之後，接著就可以引入到<code>main.js</code>。<br><code>main.js</code>。是程式的進入點，也可以透過 <code>webpack.config.js</code> 設定檔修改、自定義配置。</p>
<p>基礎的內容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  template: <span class="string">'&lt;h1&gt;Hello Vue&lt;/h1&gt;'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>如果要引入<code>myApp.vue</code>組件，則要添加一些內容，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> MyApp <span class="keyword">from</span> <span class="string">'./myApp'</span>;</span><br><span class="line"><span class="keyword">import</span> MyApp2 <span class="keyword">from</span> <span class="string">'./myApp2'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123; myApp, myApp2 &#125;,</span><br><span class="line">  template: <span class="string">'&lt;div&gt;&lt;myApp&gt;&lt;/myApp&gt;&lt;myApp2&gt;&lt;/myApp2&gt;&lt;/div&gt;'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li>第 1 行<code>import</code>，<code>&#39;vue&#39;</code>是使用 node_modules 由 npm / yarn 安裝的套件，所以可以直接寫套件的名稱。</li>
<li>第 2 行<code>import</code>，<code>&#39;./MyApp&#39;</code>是自己的 JavaScript 檔，則要在檔名前加上 <code>./</code>。</li>
<li>第 8 行，為 vue 實例添加<code>components</code>屬性，其值為引入組件，如有多個組件則用逗號分隔。</li>
<li>第 9 行，這樣就可以將 templete 樣板中改寫為<code>&lt;myApp&gt;&lt;/myApp&gt;</code>，立即使用引入的組件，但切記只能有一個<code>&lt;div&gt;</code>根元素，所以所有內容都要包在其中。</li>
</ul>
<h3 id="組件加在組件中"><a href="#組件加在組件中" class="headerlink" title="組件加在組件中"></a>組件加在組件中</h3><p>除了上述將所有組件都引入到 <code>main.js</code> 中的做法，也可以把 myApp2 組件加在 myApp1 組件中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Hello&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p class="hello"&gt;&#123;&#123; msg &#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">    &lt;myApp2&gt;&lt;/myApp2&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> myApp2 <span class="keyword">from</span> <span class="string">'./myApp2'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      msg: <span class="string">'這是一個 Vue 組件檔(myApp1)！'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123; myApp2 &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在第 10 行中，將 <code>myApp</code> 組件檔<code>import</code>進來</li>
<li>接著在第 18 行，將 <code>myApp</code> 組件 assign 到 <code>component</code> 屬性中</li>
<li>最後，在第 5 行，就可以在<code>&lt;template&gt;</code>中使用了</li>
</ul>
<h2 id="組件命名及使用"><a href="#組件命名及使用" class="headerlink" title="組件命名及使用"></a>組件命名及使用</h2><p>不論 vue 組件的命名方式為何，在 html 中使用時，一律為 kebab-case (不分大小寫，一律轉為「小寫並加上 dash 線」)</p>
<p>假設 vue 組件為<code>MyApp</code>，在 HTML 呼叫使用時，需轉換為<code>&lt;my-app&gt;&lt;/my-app&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 三種命名方式</span><br><span class="line"></span><br><span class="line">my-first-component //kebab-case</span><br><span class="line">myFirstComponent    //camelCase</span><br><span class="line">MyFirstComponent //PascalCase</span><br></pre></td></tr></table></figure>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="https://www.freecodecamp.org/news/how-to-create-a-vue-js-app-using-single-file-components-without-the-cli-7e73e5b8244f/" target="_blank" rel="noopener">How to create a Vue.js app using Single-File Components, without the CLI.</a></li>
<li><a href="http://blog.tonycube.com/2017/05/vuejs-10-single-file-components.html" target="_blank" rel="noopener"> 單一元件檔(Single-file components)</a></li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Vue-js/">Vue.js</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js/">Vue.js</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-JavaScript-嚴格模式_use strict_" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/JavaScript-嚴格模式_use strict_/">JavaScript-嚴格模式&#34;use strict&#34;</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/JavaScript-嚴格模式_use strict_/" class="article-date">
	  <time datetime="2019-06-12T02:42:38.768Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在 JavaScript 中有許多鬆散的寫法，雖然因此讓 JS 的彈性受到讚賞，卻也導致 debug 的困難度。 <code>&quot;use strict&quot;</code> 是新加入的標準，目的在於讓「開發具備更穩定的 JS」更容易，當開發者使用不穩定的語法時，即會跳出警告，讓開發者避免這些寫法。</p>
<p>使用 <strong>strict mode (嚴格模式)</strong> 這個功能，會強迫開發者在開發過程中更為謹慎，用以限制鬆散的 JavaScript 寫法，相比之下也比較不會出錯。</p>
<h2 id="優點與缺點"><a href="#優點與缺點" class="headerlink" title="優點與缺點"></a>優點與缺點</h2><p>優點：</p>
<ul>
<li>撰寫出更為嚴謹的 JS 可以避免不可預知的意外狀況，特別是合作開發時，在 debug 他人撰寫的程式碼會更為簡易。</li>
</ul>
<p>缺點：</p>
<ul>
<li>嚴謹模式限制 JS 的彈性</li>
<li>若專案中使用很多第三方撰寫的 plugin 套件，可能因為嚴格模式而無法運作，會需要修改很多程式</li>
</ul>
<p>建議及解套方法：<br><strong>嚴格模式除了可以寫在全域，也可以用在 function 中，如此一來就不會全域都嚴謹模式，避免影響既有的程式碼或 plugin 套件。</strong></p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><h3 id="全域"><a href="#全域" class="headerlink" title="全域"></a>全域</h3><p><code>&quot;use strict&quot;</code>直接寫在 JS 全域位置的最上方：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>; <span class="comment">//使用 strict mode (嚴格模式)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">123</span>;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="區域"><a href="#區域" class="headerlink" title="區域"></a>區域</h3><p><code>&quot;use strict&quot;</code>寫在函式的開頭位置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>; <span class="comment">//使用 strict mode (嚴格模式)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">123</span>;</span><br><span class="line">  <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果不是寫在函式的開頭位置，則無效。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testFun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> value = <span class="number">123</span>;</span><br><span class="line"></span><br><span class="line">  (<span class="string">'use strict'</span>); <span class="comment">//嚴格模式無效</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用嚴格模式的受限"><a href="#使用嚴格模式的受限" class="headerlink" title="使用嚴格模式的受限"></a>使用嚴格模式的受限</h2><ul>
<li>變數未宣告直接賦值</li>
<li>物件中有重複的屬性名稱</li>
<li>刪除已經宣告的錯誤</li>
<li>不能使用 ‘with’ 語法</li>
<li>argument, eval 不能作為變數名稱</li>
<li>保留字不得作為變數名稱，例：implements, interface, let, package, private, protected, static, yield</li>
</ul>
<h2 id="瀏覽器支援"><a href="#瀏覽器支援" class="headerlink" title="瀏覽器支援"></a>瀏覽器支援</h2><ul>
<li>Chrome13 之後都有支援</li>
<li>IE10,11 有支援</li>
<li>FF4 有支援</li>
<li>Safari5.1 之後有支援</li>
</ul>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/">JS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/10/05/Vue-(十二)Props/">Vue-(十二)Props</a></h6>
              <span>October 5, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/10/03/Vue-設置每頁的title及圖標/">Vue - 設置每頁的 title 及 圖標</a></h6>
              <span>October 3, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/09/25/JavaScript-let,const,var差異/">JavaScript - let、const、var差異</a></h6>
              <span>September 25, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/09/25/JavaScript-Promise/">JavaScript-Promise</a></h6>
              <span>September 25, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/17/Webpack-在vue專案中引用SCSS/">Webpack-在vue專案中引用SCSS</a></h6>
              <span>June 17, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/06/17/FontAwesome-在Vue專案中使用/">FontAwesome-在Vue專案中使用</a></h6>
              <span>June 17, 2019</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/API/">API</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Bootstrap/">Bootstrap</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">28</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Node-js/">Node.js</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Sketch/">Sketch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue-js/">Vue.js</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WebSocket/">WebSocket</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/library/">library</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Babel/">Babel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bootstrap/">Bootstrap</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/">Git</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub/">GitHub</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/">HTML</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/">JS</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">29</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NVM/">NVM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sass/">Sass</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sketch/">Sketch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Slick/">Slick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue-js/">Vue.js</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebSocket/">WebSocket</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack.</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awesomefont/">awesomefont</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/">blog</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/boiler/">boiler</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carousal/">carousal</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/carousel/">carousel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/">grid</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/">layout</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layuot/">layuot</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/library/">library</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/margin/">margin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/navbar/">navbar</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/padding/">padding</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scss/">scss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/偽元素/">偽元素</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/切版/">切版</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/實作/">實作</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/API/" style="font-size: 11.82px;">API</a> <a href="/tags/Babel/" style="font-size: 10px;">Babel</a> <a href="/tags/Bootstrap/" style="font-size: 15.45px;">Bootstrap</a> <a href="/tags/CSS/" style="font-size: 19.09px;">CSS</a> <a href="/tags/Git/" style="font-size: 12.73px;">Git</a> <a href="/tags/GitHub/" style="font-size: 10.91px;">GitHub</a> <a href="/tags/HTML/" style="font-size: 14.55px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 11.82px;">Hexo</a> <a href="/tags/JS/" style="font-size: 20px;">JS</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/NVM/" style="font-size: 10px;">NVM</a> <a href="/tags/Node-js/" style="font-size: 13.64px;">Node.js</a> <a href="/tags/Sass/" style="font-size: 10px;">Sass</a> <a href="/tags/Sketch/" style="font-size: 10px;">Sketch</a> <a href="/tags/Slick/" style="font-size: 10px;">Slick</a> <a href="/tags/Vue/" style="font-size: 17.27px;">Vue</a> <a href="/tags/Vue-js/" style="font-size: 18.18px;">Vue.js</a> <a href="/tags/WebSocket/" style="font-size: 11.82px;">WebSocket</a> <a href="/tags/Webpack/" style="font-size: 12.73px;">Webpack</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack.</a> <a href="/tags/awesomefont/" style="font-size: 11.82px;">awesomefont</a> <a href="/tags/blog/" style="font-size: 13.64px;">blog</a> <a href="/tags/boiler/" style="font-size: 10.91px;">boiler</a> <a href="/tags/carousal/" style="font-size: 10px;">carousal</a> <a href="/tags/carousel/" style="font-size: 10px;">carousel</a> <a href="/tags/git/" style="font-size: 10.91px;">git</a> <a href="/tags/github/" style="font-size: 11.82px;">github</a> <a href="/tags/grid/" style="font-size: 10px;">grid</a> <a href="/tags/jQuery/" style="font-size: 10.91px;">jQuery</a> <a href="/tags/layout/" style="font-size: 16.36px;">layout</a> <a href="/tags/layuot/" style="font-size: 10.91px;">layuot</a> <a href="/tags/library/" style="font-size: 10.91px;">library</a> <a href="/tags/margin/" style="font-size: 10px;">margin</a> <a href="/tags/navbar/" style="font-size: 10px;">navbar</a> <a href="/tags/padding/" style="font-size: 10px;">padding</a> <a href="/tags/scss/" style="font-size: 10px;">scss</a> <a href="/tags/vue/" style="font-size: 10.91px;">vue</a> <a href="/tags/偽元素/" style="font-size: 10px;">偽元素</a> <a href="/tags/切版/" style="font-size: 10px;">切版</a> <a href="/tags/實作/" style="font-size: 14.55px;">實作</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">44</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">13</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 Leah&#39;s Blog All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
